<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>Scanner.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">McCabe project</a> &gt; <a href="index.source.html" class="el_package">main.java.scanner</a> &gt; <span class="el_source">Scanner.java</span></div><h1>Scanner.java</h1><pre class="source lang-java linenums">//
// File:    Scanner.java
// Created: 4/28/2020
// Author:  Douglas Sweeney
//
// History: 
//           v1.0     4/28/2020        Douglas Sweeney modifications to a file found online.
//
package main.java.scanner;

import java.io.FileNotFoundException;
import java.util.Hashtable;

import main.java.main.TokenList;

/**
 * Convert a file to tokens.
 * 
 * @author dks
 * @since 1.0
 */
<span class="pc bpc" id="L22" title="1 of 2 branches missed.">public class Scanner {</span>

    /** End of file character. */
    public final static char EOFCH = CharReader.EOFCH;

    /** Keywords in j--. */
    private Hashtable&lt;String, TokenEnum&gt; reserved;

    /** Source characters. */
    private CharReader input;

    /** Next unscanned character. */
    private char ch;

    /** Whether a scanner error has been found. */
    private boolean isInError;

    /** Source file name. */
    private String fileName;

    /** lineNumber number of current token. */
    private int lineNumber;

    /**
     * Construct a Scanner object.
     * 
     * @param fileName the name of the file containing the source.
     * 
     * @throws FileNotFoundException when the named file cannot be found.
     */
<span class="fc" id="L52">    public Scanner(String fileName) throws FileNotFoundException {</span>
<span class="fc" id="L53">        this.input = new CharReader(fileName);</span>
<span class="fc" id="L54">        this.fileName = fileName;</span>
<span class="fc" id="L55">        isInError = false;</span>

        // Keywords
<span class="fc" id="L58">        reserved = new Hashtable&lt;String, TokenEnum&gt;();</span>
<span class="pc bpc" id="L59" title="3 of 4 branches missed.">        assert reserved != null : Scanner.class.getCanonicalName() +</span>
        		                  &quot;constructor: reserved == null&quot;;
<span class="fc" id="L61">        reserved.put(&quot;abstract&quot;, TokenEnum.ABSTRACT);</span>
<span class="fc" id="L62">        reserved.put(&quot;assert&quot;, TokenEnum.ASSERT);</span>
<span class="fc" id="L63">        reserved.put(&quot;boolean&quot;, TokenEnum.BOOLEAN);</span>
<span class="fc" id="L64">        reserved.put(&quot;break&quot;, TokenEnum.BREAK);</span>
<span class="fc" id="L65">        reserved.put(&quot;byte&quot;, TokenEnum.BYTE);</span>
<span class="fc" id="L66">        reserved.put(&quot;case&quot;, TokenEnum.CASE);</span>
<span class="fc" id="L67">        reserved.put(&quot;catch&quot;, TokenEnum.CATCH);</span>
<span class="fc" id="L68">        reserved.put(&quot;char&quot;, TokenEnum.CHAR);</span>
<span class="fc" id="L69">        reserved.put(&quot;class&quot;, TokenEnum.CLASS);</span>
<span class="fc" id="L70">        reserved.put(&quot;const&quot;, TokenEnum.CONST);</span>
<span class="fc" id="L71">        reserved.put(&quot;continue&quot;, TokenEnum.CONTINUE);</span>
<span class="fc" id="L72">        reserved.put(&quot;default&quot;, TokenEnum.DEFAULT);</span>
<span class="fc" id="L73">        reserved.put(&quot;do&quot;, TokenEnum.DO);</span>
<span class="fc" id="L74">        reserved.put(&quot;double&quot;, TokenEnum.DOUBLE);</span>
<span class="fc" id="L75">        reserved.put(&quot;else&quot;, TokenEnum.ELSE);</span>
<span class="fc" id="L76">        reserved.put(&quot;enum&quot;, TokenEnum.ENUM);</span>
<span class="fc" id="L77">        reserved.put(&quot;extends&quot;, TokenEnum.EXTENDS);</span>
<span class="fc" id="L78">        reserved.put(&quot;false&quot;, TokenEnum.FALSE);</span>
<span class="fc" id="L79">        reserved.put(&quot;final&quot;, TokenEnum.FINAL);</span>
<span class="fc" id="L80">        reserved.put(&quot;finally&quot;, TokenEnum.FINALLY);</span>
<span class="fc" id="L81">        reserved.put(&quot;float&quot;, TokenEnum.FLOAT);</span>
<span class="fc" id="L82">        reserved.put(&quot;for&quot;,  TokenEnum.FOR);</span>
<span class="fc" id="L83">        reserved.put(&quot;if&quot;, TokenEnum.IF);</span>
<span class="fc" id="L84">        reserved.put(&quot;goto&quot;, TokenEnum.GOTO);</span>
<span class="fc" id="L85">        reserved.put(&quot;implements&quot;, TokenEnum.IMPLEMENTS);</span>
<span class="fc" id="L86">        reserved.put(&quot;import&quot;, TokenEnum.IMPORT);</span>
<span class="fc" id="L87">        reserved.put(&quot;instanceof&quot;, TokenEnum.INSTANCEOF);</span>
<span class="fc" id="L88">        reserved.put(&quot;int&quot;, TokenEnum.INT);</span>
<span class="fc" id="L89">        reserved.put(&quot;interface&quot;, TokenEnum.INTERFACE);</span>
<span class="fc" id="L90">        reserved.put(&quot;long&quot;, TokenEnum.LONG);</span>
<span class="fc" id="L91">        reserved.put(&quot;native&quot;, TokenEnum.NATIVE);</span>
<span class="fc" id="L92">        reserved.put(&quot;new&quot;, TokenEnum.NEW);</span>
<span class="fc" id="L93">        reserved.put(&quot;null&quot;, TokenEnum.NULL);</span>
<span class="fc" id="L94">        reserved.put(&quot;package&quot;, TokenEnum.PACKAGE);</span>
<span class="fc" id="L95">        reserved.put(&quot;private&quot;, TokenEnum.PRIVATE);</span>
<span class="fc" id="L96">        reserved.put(&quot;protected&quot;, TokenEnum.PROTECTED);</span>
<span class="fc" id="L97">        reserved.put(&quot;public&quot;, TokenEnum.PUBLIC);</span>
<span class="fc" id="L98">        reserved.put(&quot;return&quot;, TokenEnum.RETURN);</span>
<span class="fc" id="L99">        reserved.put(&quot;short&quot;, TokenEnum.SHORT);</span>
<span class="fc" id="L100">        reserved.put(&quot;static&quot;, TokenEnum.STATIC);</span>
<span class="fc" id="L101">        reserved.put(&quot;strictfp&quot;, TokenEnum.STRICTFP);</span>
<span class="fc" id="L102">        reserved.put(&quot;super&quot;, TokenEnum.SUPER);</span>
<span class="fc" id="L103">        reserved.put(&quot;switch&quot;, TokenEnum.SWITCH);</span>
<span class="fc" id="L104">        reserved.put(&quot;synchronized&quot;, TokenEnum.SYNCHRONIZED);</span>
<span class="fc" id="L105">        reserved.put(&quot;this&quot;, TokenEnum.THIS);</span>
<span class="fc" id="L106">        reserved.put(&quot;throw&quot;, TokenEnum.THROW);</span>
<span class="fc" id="L107">        reserved.put(&quot;throws&quot;, TokenEnum.THROWS);</span>
<span class="fc" id="L108">        reserved.put(&quot;transient&quot;, TokenEnum.TRANSIENT);</span>
<span class="fc" id="L109">        reserved.put(&quot;true&quot;, TokenEnum.TRUE);</span>
<span class="fc" id="L110">        reserved.put(&quot;try&quot;, TokenEnum.TRY);</span>
<span class="fc" id="L111">        reserved.put(&quot;void&quot;, TokenEnum.VOID);</span>
<span class="fc" id="L112">        reserved.put(&quot;volatile&quot;, TokenEnum.VOLATILE);</span>
<span class="fc" id="L113">        reserved.put(&quot;while&quot;, TokenEnum.WHILE);</span>
        
<span class="fc" id="L115">        reserved.put(&quot;@Override&quot;, TokenEnum.OVERRIDE_ANNOTATION);</span>
<span class="fc" id="L116">        reserved.put(&quot;@Deprecated&quot;, TokenEnum.DEPRECATED_ANNOTATION);</span>
<span class="fc" id="L117">        reserved.put(&quot;@SuppressWarnings&quot;, TokenEnum.SUPPRESSWARNINGS_ANNOTATION);</span>

        // Prime the pump.
<span class="fc" id="L120">        nextCh();</span>
<span class="fc" id="L121">    }</span>

    /**
     * Scan the next valid token from input.
     * 
     * @return the the next scanned valid token.
     */
    public Token getNextToken() {
<span class="fc" id="L129">    	Token token = new Token(TokenEnum.NONE, &quot;&quot;, lineNumber);</span>

<span class="fc bfc" id="L131" title="All 2 branches covered.">    	while (token.enumeration == TokenEnum.NONE) {</span>
<span class="fc" id="L132">    		token = getNextValidToken();</span>
    	}
    	
<span class="fc" id="L135">    	return token;</span>
    }
    
    /**
     * Scan the next token from input.
     * 
     * @return the the next scanned token.
     */
    public Token getNextValidToken() {
<span class="fc" id="L144">    	boolean endOfCommentFound = false;</span>
<span class="fc" id="L145">    	char sign = ' ';     	</span>
        StringBuffer buffer;

<span class="fc bfc" id="L148" title="All 2 branches covered.">        while (isWhitespace(ch)) {</span>
<span class="fc" id="L149">        	nextCh();</span>
        }
        
<span class="fc" id="L152">        sign = ' ';</span>
<span class="fc" id="L153">        lineNumber = input.lineNumber();</span>
<span class="fc bfc" id="L154" title="All 30 branches covered.">        switch (ch) {</span>
        case '~':
<span class="fc" id="L156">            nextCh();</span>
<span class="fc" id="L157">            return new Token(TokenEnum.TILDE, lineNumber);</span>
        case '(':
<span class="fc" id="L159">            nextCh();</span>
<span class="fc" id="L160">            return new Token(TokenEnum.LPAREN, lineNumber);</span>
        case ')':
<span class="fc" id="L162">            nextCh();</span>
<span class="fc" id="L163">            return new Token(TokenEnum.RPAREN, lineNumber);</span>
        case '{':
<span class="fc" id="L165">            nextCh();</span>
<span class="fc" id="L166">            return new Token(TokenEnum.LBRACE, lineNumber);</span>
        case '}':
<span class="fc" id="L168">            nextCh();</span>
<span class="fc" id="L169">            return new Token(TokenEnum.RBRACE, lineNumber);</span>
        case '[':
<span class="fc" id="L171">            nextCh();</span>
<span class="fc" id="L172">            return new Token(TokenEnum.LBRACKET, lineNumber);</span>
        case ']':
<span class="fc" id="L174">            nextCh();</span>
<span class="fc" id="L175">            return new Token(TokenEnum.RBRACKET, lineNumber);</span>
        case ';':
<span class="fc" id="L177">            nextCh();</span>
<span class="fc" id="L178">            return new Token(TokenEnum.SEMICOLON, lineNumber);</span>
        case ',':
<span class="fc" id="L180">            nextCh();</span>
<span class="fc" id="L181">            return new Token(TokenEnum.COMMA, lineNumber);</span>
        case '.':
<span class="fc" id="L183">        	nextCh();</span>
<span class="fc" id="L184">   			return new Token(TokenEnum.PERIOD, lineNumber);</span>
        case '?':
<span class="fc" id="L186">            nextCh();</span>
<span class="fc" id="L187">            return new Token(TokenEnum.QUESTION_MARK, lineNumber);</span>
        case ':':
<span class="fc" id="L189">            nextCh();</span>
<span class="fc" id="L190">            return new Token(TokenEnum.COLON, lineNumber);</span>
        case '=':
<span class="fc" id="L192">            nextCh();</span>
<span class="fc bfc" id="L193" title="All 2 branches covered.">            if (ch == '=') {</span>
<span class="fc" id="L194">                nextCh();</span>
<span class="fc" id="L195">                return new Token(TokenEnum.EQUAL_EQUAL, lineNumber);</span>
            } else {
<span class="fc" id="L197">                return new Token(TokenEnum.EQUALS, lineNumber);</span>
            }
        case '!':
<span class="fc" id="L200">        	nextCh();</span>
<span class="fc bfc" id="L201" title="All 2 branches covered.">            if (ch == '=') {</span>
<span class="fc" id="L202">                nextCh();</span>
<span class="fc" id="L203">                return new Token(TokenEnum.NOT_EQUALS, lineNumber);</span>
            } else {
<span class="fc" id="L205">                return new Token(TokenEnum.NOT, lineNumber);</span>
            }
        case '|':
<span class="fc" id="L208">        	nextCh();</span>
<span class="fc bfc" id="L209" title="All 2 branches covered.">            if (ch == '=') {</span>
<span class="fc" id="L210">                nextCh();</span>
<span class="fc" id="L211">                return new Token(TokenEnum.OR_EQUALS, lineNumber);</span>
<span class="fc bfc" id="L212" title="All 2 branches covered.">            } else if (ch == '|') {</span>
<span class="fc" id="L213">            	nextCh();</span>
<span class="fc" id="L214">                return new Token(TokenEnum.OROR, lineNumber);</span>
            } else {
<span class="fc" id="L216">                return new Token(TokenEnum.OR, lineNumber);</span>
           	
            }
       case '^':
<span class="fc" id="L220">    	   nextCh();</span>
<span class="fc bfc" id="L221" title="All 2 branches covered.">            if (ch == '=') {</span>
<span class="fc" id="L222">                nextCh();</span>
<span class="fc" id="L223">                return new Token(TokenEnum.CARET_EQUALS, lineNumber);</span>
            } else {
<span class="fc" id="L225">            	nextCh();</span>
<span class="fc" id="L226">                return new Token(TokenEnum.CARET, lineNumber);</span>
            }
        case '%':
<span class="fc" id="L229">        	nextCh();</span>
<span class="fc bfc" id="L230" title="All 2 branches covered.">            if (ch == '=') {</span>
<span class="fc" id="L231">                nextCh();</span>
<span class="fc" id="L232">                return new Token(TokenEnum.MOD_EQUALS, lineNumber);</span>
            } else {
<span class="fc" id="L234">            	nextCh();</span>
<span class="fc" id="L235">                return new Token(TokenEnum.MOD, lineNumber);</span>
            }
        case '*':
<span class="fc" id="L238">        	nextCh();</span>
<span class="fc bfc" id="L239" title="All 2 branches covered.">            if (ch == '=') {</span>
<span class="fc" id="L240">                nextCh();</span>
<span class="fc" id="L241">                return new Token(TokenEnum.MULTIPLY_EQUALS, lineNumber);</span>
            } else {
<span class="fc" id="L243">                return new Token(TokenEnum.ASTERISK, lineNumber);</span>
            }
        case '/':
<span class="fc" id="L246">        	nextCh();</span>
<span class="fc bfc" id="L247" title="All 2 branches covered.">            if (ch == '=') {</span>
<span class="fc" id="L248">                nextCh();</span>
<span class="fc" id="L249">                return new Token(TokenEnum.DIVIDE_EQUALS, lineNumber);</span>
            } else {
<span class="fc bfc" id="L251" title="All 2 branches covered.">                if (ch == '/') {</span>
                   // CharReader maps all new lineNumbers to '\n'
<span class="pc bpc" id="L253" title="1 of 4 branches missed.">                   while (ch != '\n' &amp;&amp; ch != EOFCH) { //single line command</span>
<span class="fc" id="L254">                       nextCh();</span>
                   }
<span class="fc" id="L256">                   return new Token(TokenEnum.NONE, lineNumber);</span>
               }  
                else {
<span class="fc bfc" id="L259" title="All 2 branches covered.">                   if (ch == '*') { // multiline comment</span>
<span class="fc" id="L260">              	       nextCh();</span>
<span class="fc" id="L261">              	       endOfCommentFound = false;</span>
<span class="pc bpc" id="L262" title="1 of 4 branches missed.">                       while (ch != EOFCH &amp;&amp; !endOfCommentFound) { // scan though comment</span>
<span class="fc bfc" id="L263" title="All 2 branches covered.">                    	    if (ch == '*') {</span>
<span class="fc" id="L264">                    	    	nextCh();</span>
<span class="fc bfc" id="L265" title="All 2 branches covered.">                    	    	if (ch == '/') { // end of multilineNumber comment</span>
<span class="fc" id="L266">                    	    		endOfCommentFound = true;</span>
<span class="fc" id="L267">                    	    		nextCh();</span>
                    	    	} // if                    	    		
                            }
                    	    else {
<span class="fc" id="L271">                    	    	nextCh();</span>
                    	    }
                       } // while
<span class="fc" id="L274">                       return new Token(TokenEnum.NONE, lineNumber);</span>
                   } // if
                   else {
<span class="fc" id="L277">                       return new Token(TokenEnum.DIVIDE, lineNumber);</span>
                   }
                } 
            }
        case '+':
<span class="fc" id="L282">            nextCh();</span>
<span class="fc bfc" id="L283" title="All 2 branches covered.">            if (ch == '=') {</span>
<span class="fc" id="L284">                nextCh();</span>
<span class="fc" id="L285">                return new Token(TokenEnum.PLUS_EQUALS, lineNumber);</span>
            } else 
<span class="fc bfc" id="L287" title="All 2 branches covered.">            if (ch == '+') {</span>
<span class="fc" id="L288">                nextCh();</span>
<span class="fc" id="L289">                return new Token(TokenEnum.INCREMENT, lineNumber);</span>
            } else {
<span class="fc bfc" id="L291" title="All 2 branches covered.">            	switch (ch) {</span>
            		case '1':
            		case '2':
            		case '3':
            		case '4':
            		case '5':
            		case '6':
            		case '7':
            		case '8':
            		case '9':
<span class="fc" id="L301">            			buffer = new StringBuffer();</span>
<span class="fc" id="L302">            			sign = '+';</span>
<span class="fc" id="L303">            			return decimalLiteral(sign, buffer);</span>
            		default:
<span class="fc" id="L305">            			nextCh();</span>
<span class="fc" id="L306">            			return new Token(TokenEnum.PLUS, lineNumber);</span>
            	}
            }
        case '-':
<span class="fc" id="L310">            nextCh();</span>
<span class="fc bfc" id="L311" title="All 2 branches covered.">            if (ch == '-') {</span>
<span class="fc" id="L312">                nextCh();</span>
<span class="fc" id="L313">                return new Token(TokenEnum.DECREMENT, lineNumber);</span>
            } else {
<span class="fc bfc" id="L315" title="All 2 branches covered.">            	switch (ch) {</span>
        		case '1':
        		case '2':
        		case '3':
        		case '4':
        		case '5':
        		case '6':
        		case '7':
        		case '8':
        		case '9':
<span class="fc" id="L325">        			buffer = new StringBuffer();</span>
<span class="fc" id="L326">        			sign = '-';</span>
<span class="fc" id="L327">        			return decimalLiteral(sign, buffer);</span>
        		default:
<span class="fc" id="L329">        			nextCh();</span>
<span class="fc" id="L330">        			return new Token(TokenEnum.MINUS, lineNumber);</span>
            	}
            }
        case '&amp;':
<span class="fc" id="L334">            nextCh();</span>
<span class="fc bfc" id="L335" title="All 2 branches covered.">            if (ch == '&amp;') {</span>
<span class="fc" id="L336">                nextCh();</span>
<span class="fc" id="L337">                return new Token(TokenEnum.AMPERSAND_AMPERSAND, lineNumber);</span>
            } else {
<span class="fc" id="L339">                return new Token(TokenEnum.AMPERSAND, lineNumber);</span>
            }
        case '&gt;':
<span class="fc" id="L342">            nextCh();</span>
<span class="fc bfc" id="L343" title="All 2 branches covered.">            if (ch == '=') {</span>
<span class="fc" id="L344">                nextCh();</span>
<span class="fc" id="L345">                return new Token(TokenEnum.GT_EQUALS, lineNumber);</span>
            } else
<span class="fc bfc" id="L347" title="All 2 branches covered.">            if (ch == '&gt;') {</span>
<span class="fc" id="L348">                nextCh();</span>
<span class="fc bfc" id="L349" title="All 2 branches covered.">                if (ch == '&gt;') {</span>
<span class="fc" id="L350">                    nextCh();</span>
<span class="fc bfc" id="L351" title="All 2 branches covered.">                    if (ch == '=') {</span>
<span class="fc" id="L352">                        nextCh();</span>
<span class="fc" id="L353">                    	return new Token(TokenEnum.UNSIGNED_SHIFT_RIGHT_EQUALS, lineNumber);</span>
                    }
                    else {
<span class="fc" id="L356">                       	return new Token(TokenEnum.UNSIGNED_SHIFT_RIGHT, lineNumber);</span>
                    }
                } else 
<span class="fc bfc" id="L359" title="All 2 branches covered.">                    if (ch == '=') {</span>
<span class="fc" id="L360">                        nextCh();</span>
<span class="fc" id="L361">                    	return new Token(TokenEnum.SHIFT_RIGHT_EQUALS, lineNumber);</span>
                    }
                    else {
<span class="fc" id="L364">                       	return new Token(TokenEnum.SHIFT_RIGHT, lineNumber);</span>
                    }
            }  else 
<span class="fc" id="L367">            	return new Token(TokenEnum.GT, lineNumber);</span>
        case '&lt;':
<span class="fc" id="L369">            nextCh();</span>
<span class="fc bfc" id="L370" title="All 2 branches covered.">            if (ch == '=') {</span>
<span class="fc" id="L371">                nextCh();</span>
<span class="fc" id="L372">                return new Token(TokenEnum.LESS_EQUALS, lineNumber);</span>
            } else {
<span class="fc bfc" id="L374" title="All 2 branches covered.">            	if (ch == '&lt;') {</span>
<span class="fc" id="L375">            		nextCh();</span>
<span class="fc bfc" id="L376" title="All 2 branches covered.">                    if (ch == '=') {</span>
<span class="fc" id="L377">                    	nextCh();</span>
<span class="fc" id="L378">                    	return new Token(TokenEnum.SHIFT_LEFT_EQUALS, lineNumber);</span>
                    }
                    else {
<span class="fc" id="L381">                        return new Token(TokenEnum.SHIFT_LEFT, lineNumber);</span>
                    }
                }
                else {
<span class="fc" id="L385">                    return new Token(TokenEnum.LESS, lineNumber);</span>
                }
            }          
        case '\'':
<span class="fc" id="L389">            buffer = new StringBuffer();</span>
<span class="fc" id="L390">            buffer.append('\'');</span>
<span class="fc" id="L391">            nextCh();</span>
<span class="fc bfc" id="L392" title="All 2 branches covered.">            if (ch == '\\') {</span>
<span class="fc" id="L393">                nextCh();</span>
<span class="fc" id="L394">                buffer.append(escape());</span>
            } else {
<span class="fc" id="L396">                buffer.append(ch);</span>
<span class="fc" id="L397">                nextCh();</span>
            }
<span class="pc bpc" id="L399" title="1 of 2 branches missed.">            if (ch == '\'') {</span>
<span class="fc" id="L400">                buffer.append('\'');</span>
<span class="fc" id="L401">                nextCh();</span>
<span class="fc" id="L402">                return new Token(TokenEnum.CHAR, buffer.toString(), lineNumber);</span>
            } else {
                // Expected a ' ; report error and try to
                // recover.
<span class="nc" id="L406">                reportScannerError(ch</span>
                        + &quot; found by scanner where closing ' was expected.&quot;);
<span class="nc bnc" id="L408" title="All 6 branches missed.">                while (ch != '\'' &amp;&amp; ch != ';' &amp;&amp; ch != '\n') {</span>
<span class="nc" id="L409">                    nextCh();</span>
                }
<span class="nc" id="L411">                return new Token(TokenEnum.CHAR, buffer.toString(), lineNumber);</span>
            }
        case '&quot;':
<span class="fc" id="L414">            buffer = new StringBuffer();</span>
<span class="fc" id="L415">            buffer.append(&quot;\&quot;&quot;);</span>
<span class="fc" id="L416">            nextCh();</span>
<span class="pc bpc" id="L417" title="2 of 6 branches missed.">            while (ch != '&quot;' &amp;&amp; ch != '\n' &amp;&amp; ch != EOFCH) {</span>
<span class="fc bfc" id="L418" title="All 2 branches covered.">                if (ch == '\\') {</span>
<span class="fc" id="L419">                    nextCh();</span>
<span class="fc" id="L420">                    buffer.append(escape());</span>
                } else {
<span class="fc" id="L422">                    buffer.append(ch);</span>
<span class="fc" id="L423">                    nextCh();</span>
                }
            }
<span class="pc bpc" id="L426" title="1 of 2 branches missed.">            if (ch == '\n') {</span>
<span class="nc" id="L427">                reportScannerError(&quot;Unexpected end of lineNumber found in String&quot;);</span>
<span class="pc bpc" id="L428" title="1 of 2 branches missed.">            } else if (ch == EOFCH) {</span>
<span class="nc" id="L429">                reportScannerError(&quot;Unexpected end of file found in String&quot;);</span>
            } else {
                // Scan the closing &quot;
<span class="fc" id="L432">                nextCh();</span>
<span class="fc" id="L433">                buffer.append(&quot;\&quot;&quot;);</span>
            }
<span class="fc" id="L435">            return new Token(TokenEnum.STRING_LITERAL, buffer.toString(), lineNumber);</span>
        case EOFCH:
<span class="fc" id="L437">        	nextCh();</span>
<span class="fc" id="L438">            return new Token(TokenEnum.EOF, lineNumber);</span>
        case '0':
<span class="fc" id="L440">            nextCh();</span>
<span class="fc" id="L441">            buffer = new StringBuffer();</span>
<span class="fc" id="L442">            buffer.append('0');</span>
            
<span class="fc bfc" id="L444" title="All 4 branches covered.">            if (ch == 'x' || ch == 'X') {</span>
<span class="fc" id="L445">            	buffer.append(ch);</span>
<span class="fc" id="L446">            	nextCh();</span>
<span class="fc bfc" id="L447" title="All 2 branches covered.">            	while (isHexDigit(ch)) {</span>
<span class="fc" id="L448">            		buffer.append(ch);</span>
<span class="fc" id="L449">            		nextCh();           		</span>
            	}
<span class="fc" id="L451"> 	            return new Token(TokenEnum.BASE16_INTEGER, buffer.toString(), lineNumber);</span>
            }
            else
<span class="fc bfc" id="L454" title="All 4 branches covered.">            if (ch == 'b' || ch == 'B') {</span>
<span class="fc" id="L455">            	buffer.append(ch);</span>
<span class="fc" id="L456">            	nextCh();</span>
<span class="fc bfc" id="L457" title="All 2 branches covered.">            	while (isBinaryDigit(ch)) {</span>
<span class="fc" id="L458">            		buffer.append(ch);</span>
<span class="fc" id="L459">            		nextCh();</span>
            		
            	}
<span class="fc" id="L462"> 	            return new Token(TokenEnum.BASE2_INTEGER, buffer.toString(), lineNumber);</span>
           }
            else {
<span class="pc bpc" id="L465" title="1 of 6 branches missed.">                if (ch == 'f' || ch == 'F' || ch == '.') {</span>
<span class="fc bfc" id="L466" title="All 2 branches covered.">                	if (ch == '.') {</span>
<span class="fc" id="L467">                		buffer.append(ch);</span>
<span class="fc" id="L468">                		nextCh();</span>
                	}
                	
<span class="fc bfc" id="L471" title="All 2 branches covered.">                	while (isDigit(ch)) {</span>
<span class="fc" id="L472">                		buffer.append(ch);</span>
<span class="fc" id="L473">                		nextCh();</span>
                		
                	}
<span class="pc bpc" id="L476" title="1 of 4 branches missed.">                    if (ch == 'f' || ch == 'F') {</span>
<span class="fc" id="L477">                        buffer.append(ch);</span>
<span class="fc" id="L478">                        nextCh();</span>
<span class="fc" id="L479">         	            return new Token(TokenEnum.FLOAT, buffer.toString(), lineNumber);</span>
                    }
                    else
<span class="fc" id="L482">         	            return new Token(TokenEnum.DOUBLE, buffer.toString(), lineNumber);</span>
                }
                else
<span class="fc bfc" id="L485" title="All 2 branches covered.">            	while (isOctalDigit(ch)) {</span>
<span class="fc" id="L486">            		buffer.append(ch);</span>
<span class="fc" id="L487">            		nextCh();</span>
            	}
<span class="fc" id="L489"> 	            return new Token(TokenEnum.BASE8_INTEGER, buffer.toString(), lineNumber);</span>
            }
            
//          buffer = new StringBuffer();
  case '1':
        case '2':
        case '3':
        case '4':
        case '5':
        case '6':
        case '7':
        case '8':
        case '9':
<span class="fc" id="L502">        	buffer = new StringBuffer();</span>
<span class="fc" id="L503">        	return decimalLiteral(sign, buffer);</span>
        default:
<span class="fc" id="L505">           	buffer = new StringBuffer();</span>
<span class="fc bfc" id="L506" title="All 2 branches covered.">            if (ch == '@') {</span>
<span class="fc" id="L507">            	buffer.append(ch);</span>
<span class="fc" id="L508">            	nextCh();</span>
            }
<span class="pc bpc" id="L510" title="1 of 2 branches missed.">            if (isIdentifier(ch)) {</span>
<span class="fc bfc" id="L511" title="All 2 branches covered.">                while (isIdentifierPartial(ch)) {</span>
<span class="fc" id="L512">                    buffer.append(ch);</span>
<span class="fc" id="L513">                    nextCh();</span>
                }
<span class="fc" id="L515">                String identifier = buffer.toString();</span>
<span class="fc bfc" id="L516" title="All 2 branches covered.">                if (reserved.containsKey(identifier)) {</span>
<span class="fc" id="L517">                    return new Token(reserved.get(identifier), lineNumber);</span>
                } else {
<span class="fc" id="L519">                    return new Token(TokenEnum.IDENTIFIER, identifier, lineNumber);</span>
                }
            } else {
<span class="nc bnc" id="L522" title="All 2 branches missed.">            	if (ch != '\n')</span>
<span class="nc" id="L523">            		reportScannerError(&quot;Unidentified input token: '%c'&quot;, ch);</span>
<span class="nc" id="L524">                nextCh();</span>
<span class="nc" id="L525">                return getNextToken();</span>
            }
        }
   }

    /**
     *  Build a INT, FLOAT or a DOUBLE
     *
     *  @param sign a negative sign is needed
     *  @param buffer create a String object
     *
     *  @return Token
     */
    public Token decimalLiteral(char sign, StringBuffer buffer) {
    	// Add in the sign
<span class="fc bfc" id="L540" title="All 4 branches covered.">    	if (sign == '-' || sign == '+')</span>
<span class="fc" id="L541">    		buffer.append(sign);</span>
    	
        // Get the integer part of a number
<span class="fc bfc" id="L544" title="All 2 branches covered.">        while (isDigit(ch)) {</span>
<span class="fc" id="L545">            buffer.append(ch);</span>
<span class="fc" id="L546">            nextCh(); </span>
        }
       
        // its a floating point number
<span class="pc bpc" id="L550" title="1 of 6 branches missed.">        if (ch == '.' || ch == 'e' || ch == 'E') {</span>
<span class="fc bfc" id="L551" title="All 2 branches covered.">            if (ch == '.') {</span>
<span class="fc" id="L552">                nextCh();</span>
<span class="pc bpc" id="L553" title="4 of 6 branches missed.">                if ((ch == 'e' || ch == 'E') &amp;&amp; buffer.length() == 0)</span>
<span class="nc" id="L554">    				return new Token(TokenEnum.PERIOD, buffer.toString(), lineNumber);</span>
<span class="pc bpc" id="L555" title="2 of 6 branches missed.">                if ((ch == 'f' || ch == 'F') &amp;&amp; buffer.length() == 0)</span>
<span class="nc" id="L556">    				return new Token(TokenEnum.PERIOD, buffer.toString(), lineNumber);</span>
<span class="fc" id="L557">                buffer.append('.');</span>
            }
            // Get the fractional part of the number
<span class="fc bfc" id="L560" title="All 2 branches covered.">            while (isDigit(ch)) {</span>
<span class="fc" id="L561">                buffer.append(ch);</span>
<span class="fc" id="L562">                nextCh(); </span>
            }
<span class="pc bpc" id="L564" title="4 of 12 branches missed.">            if (ch == 'e' || ch == 'E' || ch == 'f' || ch == 'F' || ch == 'd' || ch == 'D') {</span>
<span class="pc bpc" id="L565" title="1 of 4 branches missed.">            	if (ch == 'e' || ch == 'E' ) {</span>
<span class="fc" id="L566">            		buffer.append(ch);</span>
<span class="fc" id="L567">                    nextCh();</span>
            	}
            	
<span class="fc bfc" id="L570" title="All 4 branches covered.">                if (ch == '+' || ch == '-') {</span>
<span class="fc" id="L571">                    buffer.append(ch);</span>
<span class="fc" id="L572">                    nextCh();</span>
                }
                // Get the exponent part of the number
<span class="fc bfc" id="L575" title="All 2 branches covered.">                while (isDigit(ch)) {</span>
<span class="fc" id="L576">                	buffer.append(ch);</span>
<span class="fc" id="L577">                	nextCh();</span>
                }
                
                // make the number a float
<span class="fc bfc" id="L581" title="All 4 branches covered.">                if (ch == 'f' || ch == 'F') {</span>
<span class="fc" id="L582">                    buffer.append(ch);</span>
<span class="fc" id="L583">                    nextCh();</span>
<span class="fc" id="L584">         	        return new Token(TokenEnum.FLOAT, buffer.toString(), lineNumber);</span>
                } 
                else {
                	// make the number a double
<span class="fc bfc" id="L588" title="All 4 branches covered.">                	if (ch == 'd' || ch == 'D') {</span>
<span class="fc" id="L589">                		buffer.append(ch);</span>
<span class="fc" id="L590">                		nextCh();</span>
<span class="fc" id="L591">                		return new Token(TokenEnum.DOUBLE, buffer.toString(), lineNumber);</span>
                	}
                	else {
<span class="pc bpc" id="L594" title="1 of 2 branches missed.">                		if (buffer.length() &gt; 1) {</span>
<span class="fc" id="L595">                			return new Token(TokenEnum.DOUBLE, buffer.toString(), lineNumber);</span>
                		}
                		else {
<span class="nc bnc" id="L598" title="All 4 branches missed.">                			if (buffer.length() == 1 &amp;&amp; buffer.charAt(0) == '.') {</span>
<span class="nc" id="L599">                				return new Token(TokenEnum.PERIOD, buffer.toString(), lineNumber);</span>
                			}
                		}
                	}
                }
            }
            else {
<span class="pc bpc" id="L606" title="1 of 2 branches missed.">        		if (buffer.length() &gt; 1) {</span>
<span class="pc bpc" id="L607" title="2 of 4 branches missed.">        			if ((buffer.indexOf(&quot;d&quot;) &gt; 0) || (buffer.indexOf(&quot;D&quot;) &gt; 0)) </span>
<span class="nc" id="L608">        			   return new Token(TokenEnum.DOUBLE, buffer.toString(), lineNumber);</span>
        			else
<span class="pc bpc" id="L610" title="2 of 4 branches missed.">        			if ((buffer.indexOf(&quot;f&quot;) &gt; 0) || (buffer.indexOf(&quot;F&quot;) &gt; 0)) </span>
<span class="nc" id="L611">         			   return new Token(TokenEnum.FLOAT, buffer.toString(), lineNumber);</span>
        			else
<span class="fc" id="L613">     			       return new Token(TokenEnum.DOUBLE, buffer.toString(), lineNumber);</span>
        		}
        		else {
<span class="nc bnc" id="L616" title="All 4 branches missed.">        			if (buffer.length() == 1 &amp;&amp; buffer.charAt(0) == '.') {</span>
<span class="nc" id="L617">        				return new Token(TokenEnum.PERIOD, buffer.toString(), lineNumber);</span>
        			}
        		
<span class="nc" id="L620">        			return new Token(TokenEnum.EOF, buffer.toString(), lineNumber);</span>
        		}
            }           
        }      
        else {
<span class="fc bfc" id="L625" title="All 4 branches covered.">            if (ch == 'l' || ch == 'L') {</span>
<span class="fc" id="L626">            	buffer.append(ch);</span>
<span class="fc" id="L627">            	nextCh();</span>
<span class="fc" id="L628">        	    return new Token(TokenEnum.LONG_LITERAL, buffer.toString(), lineNumber); </span>
            }
            
<span class="fc" id="L631">    	    return new Token(TokenEnum.INT, buffer.toString(), lineNumber); </span>
        }
        
<span class="nc" id="L634">		return null;</span>
    }

    // Add to case '.' &amp; cases 1..9. Call is &quot;return decimalLiteral()&quot;
    /**
     * Scan and return an escaped character.
     * 
     * @return escaped character.
     */

    private String escape() {
<span class="pc bpc" id="L645" title="3 of 9 branches missed.">        switch (ch) {</span>
        case 'b':
<span class="nc" id="L647">            nextCh();</span>
<span class="nc" id="L648">            return &quot;\\b&quot;;</span>
        case 't':
<span class="fc" id="L650">            nextCh();</span>
<span class="fc" id="L651">            return &quot;\\t&quot;;</span>
        case 'n':
<span class="fc" id="L653">            nextCh();</span>
<span class="fc" id="L654">            return &quot;\\n&quot;;</span>
        case 'f':
<span class="fc" id="L656">            nextCh();</span>
<span class="fc" id="L657">            return &quot;\\f&quot;;</span>
        case 'r':
<span class="nc" id="L659">            nextCh();</span>
<span class="nc" id="L660">            return &quot;\\r&quot;;</span>
        case '&quot;':
<span class="fc" id="L662">            nextCh();</span>
<span class="fc" id="L663">            return &quot;\&quot;&quot;;</span>
        case '\'':
<span class="fc" id="L665">            nextCh();</span>
<span class="fc" id="L666">            return &quot;\\'&quot;;</span>
        case '\\':
<span class="fc" id="L668">            nextCh();</span>
<span class="fc" id="L669">            return &quot;\\\\&quot;;</span>
        default:
<span class="nc" id="L671">            reportScannerError(&quot;Badly formed escape: \\%c&quot;, ch);</span>
<span class="nc" id="L672">            nextCh();</span>
<span class="nc" id="L673">            return &quot;&quot;;</span>
        }
    }

    /**
     * Advance ch to the next character from input, and update the lineNumber number.
     */

    private void nextCh() {
<span class="fc" id="L682">        lineNumber = input.lineNumber();</span>
        try {
<span class="fc" id="L684">            ch = input.nextChar();</span>
<span class="nc" id="L685">        } catch (Exception e) {</span>
<span class="nc" id="L686">            reportScannerError(&quot;Unable to read characters from input&quot;);</span>
<span class="fc" id="L687">        }</span>
<span class="fc" id="L688">    }</span>

    /**
     * Report a lexcial error and record the fact that an error has occured.
     * This fact can be ascertained from the Scanner by sending it an
     * errorHasOccurred() message.
     * 
     * @param message
     *            message identifying the error.
     * @param args
     *            related values.
     */

    private void reportScannerError(String message, Object... args) {
<span class="nc" id="L702">        isInError = true;</span>
<span class="nc" id="L703">        System.err.printf(&quot;%s:%d: &quot;, fileName, lineNumber);</span>
<span class="nc" id="L704">        System.err.printf(message, args);</span>
<span class="nc" id="L705">        System.err.println();</span>
<span class="nc" id="L706">    }</span>

    /**
     * Return true if the specified character is a hex digit; false otherwise.
     * 
     * @param c
     *            character.
     * @return true or false.
     */

    private boolean isHexDigit(char c) {
<span class="fc" id="L717">    	boolean ok = false;</span>
<span class="fc bfc" id="L718" title="All 2 branches covered.">        switch(c) {</span>
        case '0':
        case '1':
        case '2':
        case '3':
        case '4':
        case '5':
        case '6':
        case '7':
        case '8':
        case '9':
        case 'a':
        case 'b':
        case 'c':
        case 'd':
        case 'e':
        case 'f':
        case 'A':
        case 'B':
        case 'C':
        case 'D':
        case 'E':
        case 'F':
        case 'l':
        case 'L':
        case '_':
<span class="fc" id="L744">        	ok = true;</span>
        	break;
        }
    
<span class="fc" id="L748">        return ok;</span>
    }

    /**
     * Return true if the specified character is a octal digit; false otherwise.
     * 
     * @param c
     *            character.
     * @return true or false.
     */

    private boolean isOctalDigit(char c) {
<span class="fc" id="L760">    	boolean ok = false;</span>
<span class="fc bfc" id="L761" title="All 2 branches covered.">        switch(c) {</span>
        case '0':
        case '1':
        case '2':
        case '3':
        case '4':
        case '5':
        case '6':
        case '7':
        case 'l':
        case 'L':
        case '_':
<span class="fc" id="L773">        	ok = true;</span>
        	break;
        }
    
<span class="fc" id="L777">        return ok;</span>
    }

    /**
     * Return true if the specified character is a binary digit; false otherwise.
     * 
     * @param c
     *            character.
     * @return true or false.
     */

    private boolean isBinaryDigit(char c) {
<span class="fc" id="L789">    	boolean ok = false;</span>
<span class="fc bfc" id="L790" title="All 2 branches covered.">        switch(c) {</span>
        case '0':
        case '1':
        case 'l':
        case 'L':
        case '_':
<span class="fc" id="L796">        	ok = true;</span>
        	break;
        }
    
<span class="fc" id="L800">        return ok;</span>
    }

    /**
     * Return true if the specified character is a digit (0-9); false otherwise.
     * 
     * @param c
     *            character.
     * @return true or false.
     */

    private boolean isDigit(char c) {
<span class="fc bfc" id="L812" title="All 6 branches covered.">        return ((c &gt;= '0' &amp;&amp; c &lt;= '9') || ch == '_');</span>
    }

   /**
     * Return true if the specified character is a whitespace; false otherwise.
     * 
     * @param c
     *            character.
     * @return true or false.
     */

    private boolean isWhitespace(char c) {
<span class="fc bfc" id="L824" title="All 2 branches covered.">        switch (c) {</span>
        case ' ':
        case '\t':
        case '\n': // CharReader maps all new lineNumbers to '\n'
        case '\f':
<span class="fc" id="L829">            return true;</span>
        }
<span class="fc" id="L831">        return false;</span>
    }

    /**
     * Return true if the specified character can start an identifier name;
     * false otherwise.
     * 
     * @param c
     *            character.
     * @return true or false.
     */

    private boolean isIdentifier(char c) {
<span class="pc bpc" id="L844" title="1 of 12 branches missed.">        return (c &gt;= 'a' &amp;&amp; c &lt;= 'z' || c &gt;= 'A' &amp;&amp; c &lt;= 'Z' || c == '_' || c == '$');</span>
    }

    /**
     * Return true if the specified character can be part of an identifier name;
     * false otherwise.
     * 
     * @param c
     *            character.
     * @return true or false.
     */

    private boolean isIdentifierPartial(char c) {
<span class="fc bfc" id="L857" title="All 4 branches covered.">        return (isIdentifier(c) || isDigit(c));</span>
    }

    /**
     * Has an error occurred up to now in lexical analysis?
     * 
     * @return true or false.
     */

    public boolean errorHasOccurred() {
<span class="nc" id="L867">        return isInError;</span>
    }

    /**
     * The name of the source file.
     *     	token = scanner.getNextToken();
    	System.out.println(token.enumeration);

     * @return name of the source file.
     */

    public String fileName() {
<span class="nc" id="L879">        return fileName;</span>
    }

    public static void main(String[] args) {
<span class="nc" id="L883">    	Token token = null;</span>
<span class="nc" id="L884">    	Scanner scanner = null;</span>
<span class="nc" id="L885">    	TokenList tokenList = new TokenList();</span>
    	
		try {
<span class="nc" id="L888">			scanner = new Scanner(&quot;src/jplusplus/scanner/TestInput.java&quot;);</span>
<span class="nc" id="L889">		} catch (FileNotFoundException e) {</span>
<span class="nc" id="L890">			e.printStackTrace();</span>
<span class="nc" id="L891">		}</span>
<span class="nc" id="L892">    	token = scanner.getNextToken();</span>
<span class="nc" id="L893">    	System.out.println(token.enumeration);</span>
<span class="nc bnc" id="L894" title="All 2 branches missed.">    	while  (token.enumeration != TokenEnum.EOF) {</span>
<span class="nc" id="L895">    		token = scanner.getNextToken();</span>
<span class="nc" id="L896">    		tokenList.add(token);</span>
    	}
<span class="nc" id="L898">    	tokenList.print(tokenList.getList());</span>
<span class="nc" id="L899">    }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.5.201910111838</span></div></body></html>