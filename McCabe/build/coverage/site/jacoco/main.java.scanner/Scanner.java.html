<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>Scanner.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">McCabe project</a> &gt; <a href="index.source.html" class="el_package">main.java.scanner</a> &gt; <span class="el_source">Scanner.java</span></div><h1>Scanner.java</h1><pre class="source lang-java linenums">package main.java.scanner;

import java.io.FileNotFoundException;
import java.util.Hashtable;

import main.java.main.TokenList;

<span class="pc bpc" id="L8" title="1 of 2 branches missed.">public class Scanner {</span>

    /** End of file character. */
    public final static char EOFCH = CharReader.EOFCH;

    /** Keywords in j--. */
    private Hashtable&lt;String, TokenEnum&gt; reserved;

    /** Source characters. */
    private CharReader input;

    /** Next unscanned character. */
    private char ch;

    /** Whether a scanner error has been found. */
    private boolean isInError;

    /** Source file name. */
    private String fileName;

    /** lineNumber number of current token. */
    private int lineNumber;

    /**
     * Construct a Scanner object.
     * 
     * @param fileName
     *            the name of the file containing the source.
     * @exception FileNotFoundException
     *                when the named file cannot be found.
     */
<span class="fc" id="L39">    public Scanner(String fileName) throws FileNotFoundException {</span>
<span class="fc" id="L40">        this.input = new CharReader(fileName);</span>
<span class="fc" id="L41">        this.fileName = fileName;</span>
<span class="fc" id="L42">        isInError = false;</span>

        // Keywords
<span class="fc" id="L45">        reserved = new Hashtable&lt;String, TokenEnum&gt;();</span>
<span class="pc bpc" id="L46" title="3 of 4 branches missed.">        assert reserved != null : Scanner.class.getCanonicalName() +</span>
        		                  &quot;constructor: reserved == null&quot;;
<span class="fc" id="L48">        reserved.put(&quot;abstract&quot;, TokenEnum.ABSTRACT);</span>
<span class="fc" id="L49">        reserved.put(&quot;assert&quot;, TokenEnum.ASSERT);</span>
<span class="fc" id="L50">        reserved.put(&quot;boolean&quot;, TokenEnum.BOOLEAN);</span>
<span class="fc" id="L51">        reserved.put(&quot;break&quot;, TokenEnum.BREAK);</span>
<span class="fc" id="L52">        reserved.put(&quot;byte&quot;, TokenEnum.BYTE);</span>
<span class="fc" id="L53">        reserved.put(&quot;case&quot;, TokenEnum.CASE);</span>
<span class="fc" id="L54">        reserved.put(&quot;catch&quot;, TokenEnum.CATCH);</span>
<span class="fc" id="L55">        reserved.put(&quot;char&quot;, TokenEnum.CHAR);</span>
<span class="fc" id="L56">        reserved.put(&quot;class&quot;, TokenEnum.CLASS);</span>
<span class="fc" id="L57">        reserved.put(&quot;const&quot;, TokenEnum.CONST);</span>
<span class="fc" id="L58">        reserved.put(&quot;continue&quot;, TokenEnum.CONTINUE);</span>
<span class="fc" id="L59">        reserved.put(&quot;default&quot;, TokenEnum.DEFAULT);</span>
<span class="fc" id="L60">        reserved.put(&quot;do&quot;, TokenEnum.DO);</span>
<span class="fc" id="L61">        reserved.put(&quot;double&quot;, TokenEnum.DOUBLE);</span>
<span class="fc" id="L62">        reserved.put(&quot;else&quot;, TokenEnum.ELSE);</span>
<span class="fc" id="L63">        reserved.put(&quot;enum&quot;, TokenEnum.ENUM);</span>
<span class="fc" id="L64">        reserved.put(&quot;extends&quot;, TokenEnum.EXTENDS);</span>
<span class="fc" id="L65">        reserved.put(&quot;false&quot;, TokenEnum.FALSE);</span>
<span class="fc" id="L66">        reserved.put(&quot;final&quot;, TokenEnum.FINAL);</span>
<span class="fc" id="L67">        reserved.put(&quot;finally&quot;, TokenEnum.FINALLY);</span>
<span class="fc" id="L68">        reserved.put(&quot;float&quot;, TokenEnum.FLOAT);</span>
<span class="fc" id="L69">        reserved.put(&quot;for&quot;,  TokenEnum.FOR);</span>
<span class="fc" id="L70">        reserved.put(&quot;if&quot;, TokenEnum.IF);</span>
<span class="fc" id="L71">        reserved.put(&quot;goto&quot;, TokenEnum.GOTO);</span>
<span class="fc" id="L72">        reserved.put(&quot;implements&quot;, TokenEnum.IMPLEMENTS);</span>
<span class="fc" id="L73">        reserved.put(&quot;import&quot;, TokenEnum.IMPORT);</span>
<span class="fc" id="L74">        reserved.put(&quot;instanceof&quot;, TokenEnum.INSTANCEOF);</span>
<span class="fc" id="L75">        reserved.put(&quot;int&quot;, TokenEnum.INT);</span>
<span class="fc" id="L76">        reserved.put(&quot;interface&quot;, TokenEnum.INTERFACE);</span>
<span class="fc" id="L77">        reserved.put(&quot;long&quot;, TokenEnum.LONG);</span>
<span class="fc" id="L78">        reserved.put(&quot;native&quot;, TokenEnum.NATIVE);</span>
<span class="fc" id="L79">        reserved.put(&quot;new&quot;, TokenEnum.NEW);</span>
<span class="fc" id="L80">        reserved.put(&quot;null&quot;, TokenEnum.NULL);</span>
<span class="fc" id="L81">        reserved.put(&quot;package&quot;, TokenEnum.PACKAGE);</span>
<span class="fc" id="L82">        reserved.put(&quot;private&quot;, TokenEnum.PRIVATE);</span>
<span class="fc" id="L83">        reserved.put(&quot;protected&quot;, TokenEnum.PROTECTED);</span>
<span class="fc" id="L84">        reserved.put(&quot;public&quot;, TokenEnum.PUBLIC);</span>
<span class="fc" id="L85">        reserved.put(&quot;return&quot;, TokenEnum.RETURN);</span>
<span class="fc" id="L86">        reserved.put(&quot;short&quot;, TokenEnum.SHORT);</span>
<span class="fc" id="L87">        reserved.put(&quot;static&quot;, TokenEnum.STATIC);</span>
<span class="fc" id="L88">        reserved.put(&quot;strictfp&quot;, TokenEnum.STRICTFP);</span>
<span class="fc" id="L89">        reserved.put(&quot;super&quot;, TokenEnum.SUPER);</span>
<span class="fc" id="L90">        reserved.put(&quot;switch&quot;, TokenEnum.SWITCH);</span>
<span class="fc" id="L91">        reserved.put(&quot;synchronized&quot;, TokenEnum.SYNCHRONIZED);</span>
<span class="fc" id="L92">        reserved.put(&quot;this&quot;, TokenEnum.THIS);</span>
<span class="fc" id="L93">        reserved.put(&quot;throw&quot;, TokenEnum.THROW);</span>
<span class="fc" id="L94">        reserved.put(&quot;throws&quot;, TokenEnum.THROWS);</span>
<span class="fc" id="L95">        reserved.put(&quot;transient&quot;, TokenEnum.TRANSIENT);</span>
<span class="fc" id="L96">        reserved.put(&quot;true&quot;, TokenEnum.TRUE);</span>
<span class="fc" id="L97">        reserved.put(&quot;try&quot;, TokenEnum.TRY);</span>
<span class="fc" id="L98">        reserved.put(&quot;void&quot;, TokenEnum.VOID);</span>
<span class="fc" id="L99">        reserved.put(&quot;volatile&quot;, TokenEnum.VOLATILE);</span>
<span class="fc" id="L100">        reserved.put(&quot;while&quot;, TokenEnum.WHILE);</span>
        
<span class="fc" id="L102">        reserved.put(&quot;@Override&quot;, TokenEnum.OVERRIDE_ANNOTATION);</span>
<span class="fc" id="L103">        reserved.put(&quot;@Deprecated&quot;, TokenEnum.DEPRECATED_ANNOTATION);</span>
<span class="fc" id="L104">        reserved.put(&quot;@SuppressWarnings&quot;, TokenEnum.SUPPRESSWARNINGS_ANNOTATION);</span>

        // Prime the pump.
<span class="fc" id="L107">        nextCh();</span>
<span class="fc" id="L108">    }</span>

    /**
     * Scan the next valid token from input.
     * 
     * @return the the next scanned valid token.
     */
    public Token getNextToken() {
<span class="fc" id="L116">    	Token token = new Token(TokenEnum.NONE, &quot;&quot;, lineNumber);</span>

<span class="fc bfc" id="L118" title="All 2 branches covered.">    	while (token.enumeration == TokenEnum.NONE) {</span>
<span class="fc" id="L119">    		token = getNextValidToken();</span>
    	}
    	
<span class="fc" id="L122">    	return token;</span>
    }
    
    /**
     * Scan the next token from input.
     * 
     * @return the the next scanned token.
     */
    public Token getNextValidToken() {
<span class="fc" id="L131">    	boolean endOfCommentFound = false;</span>
<span class="fc" id="L132">    	char sign = ' ';     	</span>
        StringBuffer buffer;

<span class="fc bfc" id="L135" title="All 2 branches covered.">        while (isWhitespace(ch)) {</span>
<span class="fc" id="L136">        	nextCh();</span>
        }
        
<span class="fc" id="L139">        sign = ' ';</span>
<span class="fc" id="L140">        lineNumber = input.lineNumber();</span>
<span class="fc bfc" id="L141" title="All 30 branches covered.">        switch (ch) {</span>
        case '~':
<span class="fc" id="L143">            nextCh();</span>
<span class="fc" id="L144">            return new Token(TokenEnum.TILDE, lineNumber);</span>
        case '(':
<span class="fc" id="L146">            nextCh();</span>
<span class="fc" id="L147">            return new Token(TokenEnum.LPAREN, lineNumber);</span>
        case ')':
<span class="fc" id="L149">            nextCh();</span>
<span class="fc" id="L150">            return new Token(TokenEnum.RPAREN, lineNumber);</span>
        case '{':
<span class="fc" id="L152">            nextCh();</span>
<span class="fc" id="L153">            return new Token(TokenEnum.LBRACE, lineNumber);</span>
        case '}':
<span class="fc" id="L155">            nextCh();</span>
<span class="fc" id="L156">            return new Token(TokenEnum.RBRACE, lineNumber);</span>
        case '[':
<span class="fc" id="L158">            nextCh();</span>
<span class="fc" id="L159">            return new Token(TokenEnum.LBRACKET, lineNumber);</span>
        case ']':
<span class="fc" id="L161">            nextCh();</span>
<span class="fc" id="L162">            return new Token(TokenEnum.RBRACKET, lineNumber);</span>
        case ';':
<span class="fc" id="L164">            nextCh();</span>
<span class="fc" id="L165">            return new Token(TokenEnum.SEMICOLON, lineNumber);</span>
        case ',':
<span class="fc" id="L167">            nextCh();</span>
<span class="fc" id="L168">            return new Token(TokenEnum.COMMA, lineNumber);</span>
        case '.':
<span class="fc" id="L170">        	nextCh();</span>
<span class="fc" id="L171">   			return new Token(TokenEnum.PERIOD, lineNumber);</span>
        case '?':
<span class="fc" id="L173">            nextCh();</span>
<span class="fc" id="L174">            return new Token(TokenEnum.QUESTION_MARK, lineNumber);</span>
        case ':':
<span class="fc" id="L176">            nextCh();</span>
<span class="fc" id="L177">            return new Token(TokenEnum.COLON, lineNumber);</span>
        case '=':
<span class="fc" id="L179">            nextCh();</span>
<span class="fc bfc" id="L180" title="All 2 branches covered.">            if (ch == '=') {</span>
<span class="fc" id="L181">                nextCh();</span>
<span class="fc" id="L182">                return new Token(TokenEnum.EQUAL_EQUAL, lineNumber);</span>
            } else {
<span class="fc" id="L184">                return new Token(TokenEnum.EQUALS, lineNumber);</span>
            }
        case '!':
<span class="fc" id="L187">        	nextCh();</span>
<span class="fc bfc" id="L188" title="All 2 branches covered.">            if (ch == '=') {</span>
<span class="fc" id="L189">                nextCh();</span>
<span class="fc" id="L190">                return new Token(TokenEnum.NOT_EQUALS, lineNumber);</span>
            } else {
<span class="fc" id="L192">                return new Token(TokenEnum.NOT, lineNumber);</span>
            }
        case '|':
<span class="fc" id="L195">        	nextCh();</span>
<span class="fc bfc" id="L196" title="All 2 branches covered.">            if (ch == '=') {</span>
<span class="fc" id="L197">                nextCh();</span>
<span class="fc" id="L198">                return new Token(TokenEnum.OR_EQUALS, lineNumber);</span>
<span class="fc bfc" id="L199" title="All 2 branches covered.">            } else if (ch == '|') {</span>
<span class="fc" id="L200">            	nextCh();</span>
<span class="fc" id="L201">                return new Token(TokenEnum.OROR, lineNumber);</span>
            } else {
<span class="fc" id="L203">                return new Token(TokenEnum.OR, lineNumber);</span>
           	
            }
       case '^':
<span class="fc" id="L207">    	   nextCh();</span>
<span class="fc bfc" id="L208" title="All 2 branches covered.">            if (ch == '=') {</span>
<span class="fc" id="L209">                nextCh();</span>
<span class="fc" id="L210">                return new Token(TokenEnum.CARET_EQUALS, lineNumber);</span>
            } else {
<span class="fc" id="L212">            	nextCh();</span>
<span class="fc" id="L213">                return new Token(TokenEnum.CARET, lineNumber);</span>
            }
        case '%':
<span class="fc" id="L216">        	nextCh();</span>
<span class="fc bfc" id="L217" title="All 2 branches covered.">            if (ch == '=') {</span>
<span class="fc" id="L218">                nextCh();</span>
<span class="fc" id="L219">                return new Token(TokenEnum.MOD_EQUALS, lineNumber);</span>
            } else {
<span class="fc" id="L221">            	nextCh();</span>
<span class="fc" id="L222">                return new Token(TokenEnum.MOD, lineNumber);</span>
            }
        case '*':
<span class="fc" id="L225">        	nextCh();</span>
<span class="fc bfc" id="L226" title="All 2 branches covered.">            if (ch == '=') {</span>
<span class="fc" id="L227">                nextCh();</span>
<span class="fc" id="L228">                return new Token(TokenEnum.MULTIPLY_EQUALS, lineNumber);</span>
            } else {
<span class="fc" id="L230">                return new Token(TokenEnum.ASTERISK, lineNumber);</span>
            }
        case '/':
<span class="fc" id="L233">        	nextCh();</span>
<span class="fc bfc" id="L234" title="All 2 branches covered.">            if (ch == '=') {</span>
<span class="fc" id="L235">                nextCh();</span>
<span class="fc" id="L236">                return new Token(TokenEnum.DIVIDE_EQUALS, lineNumber);</span>
            } else {
<span class="fc bfc" id="L238" title="All 2 branches covered.">                if (ch == '/') {</span>
                   // CharReader maps all new lineNumbers to '\n'
<span class="pc bpc" id="L240" title="1 of 4 branches missed.">                   while (ch != '\n' &amp;&amp; ch != EOFCH) { //single line command</span>
<span class="fc" id="L241">                       nextCh();</span>
                   }
<span class="fc" id="L243">                   return new Token(TokenEnum.NONE, lineNumber);</span>
               }  
                else {
<span class="fc bfc" id="L246" title="All 2 branches covered.">                   if (ch == '*') { // multiline comment</span>
<span class="fc" id="L247">              	       nextCh();</span>
<span class="fc" id="L248">              	       endOfCommentFound = false;</span>
<span class="pc bpc" id="L249" title="1 of 4 branches missed.">                       while (ch != EOFCH &amp;&amp; !endOfCommentFound) { // scan though comment</span>
<span class="fc bfc" id="L250" title="All 2 branches covered.">                    	    if (ch == '*') {</span>
<span class="fc" id="L251">                    	    	nextCh();</span>
<span class="fc bfc" id="L252" title="All 2 branches covered.">                    	    	if (ch == '/') { // end of multilineNumber comment</span>
<span class="fc" id="L253">                    	    		endOfCommentFound = true;</span>
<span class="fc" id="L254">                    	    		nextCh();</span>
                    	    	} // if                    	    		
                            }
                    	    else {
<span class="fc" id="L258">                    	    	nextCh();</span>
                    	    }
                       } // while
<span class="fc" id="L261">                       return new Token(TokenEnum.NONE, lineNumber);</span>
                   } // if
                   else {
<span class="fc" id="L264">                       return new Token(TokenEnum.DIVIDE, lineNumber);</span>
                   }
                } 
            }
        case '+':
<span class="fc" id="L269">            nextCh();</span>
<span class="fc bfc" id="L270" title="All 2 branches covered.">            if (ch == '=') {</span>
<span class="fc" id="L271">                nextCh();</span>
<span class="fc" id="L272">                return new Token(TokenEnum.PLUS_EQUALS, lineNumber);</span>
            } else 
<span class="fc bfc" id="L274" title="All 2 branches covered.">            if (ch == '+') {</span>
<span class="fc" id="L275">                nextCh();</span>
<span class="fc" id="L276">                return new Token(TokenEnum.INCREMENT, lineNumber);</span>
            } else {
<span class="fc bfc" id="L278" title="All 2 branches covered.">            	switch (ch) {</span>
            		case '1':
            		case '2':
            		case '3':
            		case '4':
            		case '5':
            		case '6':
            		case '7':
            		case '8':
            		case '9':
<span class="fc" id="L288">            			buffer = new StringBuffer();</span>
<span class="fc" id="L289">            			sign = '+';</span>
<span class="fc" id="L290">            			return decimalLiteral(sign, buffer);</span>
            		default:
<span class="fc" id="L292">            			nextCh();</span>
<span class="fc" id="L293">            			return new Token(TokenEnum.PLUS, lineNumber);</span>
            	}
            }
        case '-':
<span class="fc" id="L297">            nextCh();</span>
<span class="fc bfc" id="L298" title="All 2 branches covered.">            if (ch == '-') {</span>
<span class="fc" id="L299">                nextCh();</span>
<span class="fc" id="L300">                return new Token(TokenEnum.DECREMENT, lineNumber);</span>
            } else {
<span class="fc bfc" id="L302" title="All 2 branches covered.">            	switch (ch) {</span>
        		case '1':
        		case '2':
        		case '3':
        		case '4':
        		case '5':
        		case '6':
        		case '7':
        		case '8':
        		case '9':
<span class="fc" id="L312">        			buffer = new StringBuffer();</span>
<span class="fc" id="L313">        			sign = '-';</span>
<span class="fc" id="L314">        			return decimalLiteral(sign, buffer);</span>
        		default:
<span class="fc" id="L316">        			nextCh();</span>
<span class="fc" id="L317">        			return new Token(TokenEnum.MINUS, lineNumber);</span>
            	}
            }
        case '&amp;':
<span class="fc" id="L321">            nextCh();</span>
<span class="fc bfc" id="L322" title="All 2 branches covered.">            if (ch == '&amp;') {</span>
<span class="fc" id="L323">                nextCh();</span>
<span class="fc" id="L324">                return new Token(TokenEnum.AMPERSAND_AMPERSAND, lineNumber);</span>
            } else {
<span class="fc" id="L326">                return new Token(TokenEnum.AMPERSAND, lineNumber);</span>
            }
        case '&gt;':
<span class="fc" id="L329">            nextCh();</span>
<span class="fc bfc" id="L330" title="All 2 branches covered.">            if (ch == '=') {</span>
<span class="fc" id="L331">                nextCh();</span>
<span class="fc" id="L332">                return new Token(TokenEnum.GT_EQUALS, lineNumber);</span>
            } else
<span class="fc bfc" id="L334" title="All 2 branches covered.">            if (ch == '&gt;') {</span>
<span class="fc" id="L335">                nextCh();</span>
<span class="fc bfc" id="L336" title="All 2 branches covered.">                if (ch == '&gt;') {</span>
<span class="fc" id="L337">                    nextCh();</span>
<span class="fc bfc" id="L338" title="All 2 branches covered.">                    if (ch == '=') {</span>
<span class="fc" id="L339">                        nextCh();</span>
<span class="fc" id="L340">                    	return new Token(TokenEnum.UNSIGNED_SHIFT_RIGHT_EQUALS, lineNumber);</span>
                    }
                    else {
<span class="fc" id="L343">                       	return new Token(TokenEnum.UNSIGNED_SHIFT_RIGHT, lineNumber);</span>
                    }
                } else 
<span class="fc bfc" id="L346" title="All 2 branches covered.">                    if (ch == '=') {</span>
<span class="fc" id="L347">                        nextCh();</span>
<span class="fc" id="L348">                    	return new Token(TokenEnum.SHIFT_RIGHT_EQUALS, lineNumber);</span>
                    }
                    else {
<span class="fc" id="L351">                       	return new Token(TokenEnum.SHIFT_RIGHT, lineNumber);</span>
                    }
            }  else 
<span class="fc" id="L354">            	return new Token(TokenEnum.GT, lineNumber);</span>
        case '&lt;':
<span class="fc" id="L356">            nextCh();</span>
<span class="fc bfc" id="L357" title="All 2 branches covered.">            if (ch == '=') {</span>
<span class="fc" id="L358">                nextCh();</span>
<span class="fc" id="L359">                return new Token(TokenEnum.LESS_EQUALS, lineNumber);</span>
            } else {
<span class="fc bfc" id="L361" title="All 2 branches covered.">            	if (ch == '&lt;') {</span>
<span class="fc" id="L362">            		nextCh();</span>
<span class="fc bfc" id="L363" title="All 2 branches covered.">                    if (ch == '=') {</span>
<span class="fc" id="L364">                    	nextCh();</span>
<span class="fc" id="L365">                    	return new Token(TokenEnum.SHIFT_LEFT_EQUALS, lineNumber);</span>
                    }
                    else {
<span class="fc" id="L368">                        return new Token(TokenEnum.SHIFT_LEFT, lineNumber);</span>
                    }
                }
                else {
<span class="fc" id="L372">                    return new Token(TokenEnum.LESS, lineNumber);</span>
                }
            }          
        case '\'':
<span class="fc" id="L376">            buffer = new StringBuffer();</span>
<span class="fc" id="L377">            buffer.append('\'');</span>
<span class="fc" id="L378">            nextCh();</span>
<span class="fc bfc" id="L379" title="All 2 branches covered.">            if (ch == '\\') {</span>
<span class="fc" id="L380">                nextCh();</span>
<span class="fc" id="L381">                buffer.append(escape());</span>
            } else {
<span class="fc" id="L383">                buffer.append(ch);</span>
<span class="fc" id="L384">                nextCh();</span>
            }
<span class="pc bpc" id="L386" title="1 of 2 branches missed.">            if (ch == '\'') {</span>
<span class="fc" id="L387">                buffer.append('\'');</span>
<span class="fc" id="L388">                nextCh();</span>
<span class="fc" id="L389">                return new Token(TokenEnum.CHAR, buffer.toString(), lineNumber);</span>
            } else {
                // Expected a ' ; report error and try to
                // recover.
<span class="nc" id="L393">                reportScannerError(ch</span>
                        + &quot; found by scanner where closing ' was expected.&quot;);
<span class="nc bnc" id="L395" title="All 6 branches missed.">                while (ch != '\'' &amp;&amp; ch != ';' &amp;&amp; ch != '\n') {</span>
<span class="nc" id="L396">                    nextCh();</span>
                }
<span class="nc" id="L398">                return new Token(TokenEnum.CHAR, buffer.toString(), lineNumber);</span>
            }
        case '&quot;':
<span class="fc" id="L401">            buffer = new StringBuffer();</span>
<span class="fc" id="L402">            buffer.append(&quot;\&quot;&quot;);</span>
<span class="fc" id="L403">            nextCh();</span>
<span class="pc bpc" id="L404" title="2 of 6 branches missed.">            while (ch != '&quot;' &amp;&amp; ch != '\n' &amp;&amp; ch != EOFCH) {</span>
<span class="pc bpc" id="L405" title="1 of 2 branches missed.">                if (ch == '\\') {</span>
<span class="nc" id="L406">                    nextCh();</span>
<span class="nc" id="L407">                    buffer.append(escape());</span>
                } else {
<span class="fc" id="L409">                    buffer.append(ch);</span>
<span class="fc" id="L410">                    nextCh();</span>
                }
            }
<span class="pc bpc" id="L413" title="1 of 2 branches missed.">            if (ch == '\n') {</span>
<span class="nc" id="L414">                reportScannerError(&quot;Unexpected end of lineNumber found in String&quot;);</span>
<span class="pc bpc" id="L415" title="1 of 2 branches missed.">            } else if (ch == EOFCH) {</span>
<span class="nc" id="L416">                reportScannerError(&quot;Unexpected end of file found in String&quot;);</span>
            } else {
                // Scan the closing &quot;
<span class="fc" id="L419">                nextCh();</span>
<span class="fc" id="L420">                buffer.append(&quot;\&quot;&quot;);</span>
            }
<span class="fc" id="L422">            return new Token(TokenEnum.STRING_LITERAL, buffer.toString(), lineNumber);</span>
        case EOFCH:
<span class="fc" id="L424">        	nextCh();</span>
<span class="fc" id="L425">            return new Token(TokenEnum.EOF, lineNumber);</span>
        case '0':
<span class="fc" id="L427">            nextCh();</span>
<span class="fc" id="L428">            buffer = new StringBuffer();</span>
<span class="fc" id="L429">            buffer.append('0');</span>
            
<span class="fc bfc" id="L431" title="All 4 branches covered.">            if (ch == 'x' || ch == 'X') {</span>
<span class="fc" id="L432">            	buffer.append(ch);</span>
<span class="fc" id="L433">            	nextCh();</span>
<span class="fc bfc" id="L434" title="All 2 branches covered.">            	while (isHexDigit(ch)) {</span>
<span class="fc" id="L435">            		buffer.append(ch);</span>
<span class="fc" id="L436">            		nextCh();           		</span>
            	}
<span class="fc" id="L438"> 	            return new Token(TokenEnum.BASE16_INTEGER, buffer.toString(), lineNumber);</span>
            }
            else
<span class="fc bfc" id="L441" title="All 4 branches covered.">            if (ch == 'b' || ch == 'B') {</span>
<span class="fc" id="L442">            	buffer.append(ch);</span>
<span class="fc" id="L443">            	nextCh();</span>
<span class="fc bfc" id="L444" title="All 2 branches covered.">            	while (isBinaryDigit(ch)) {</span>
<span class="fc" id="L445">            		buffer.append(ch);</span>
<span class="fc" id="L446">            		nextCh();</span>
            		
            	}
<span class="fc" id="L449"> 	            return new Token(TokenEnum.BASE2_INTEGER, buffer.toString(), lineNumber);</span>
           }
            else {
<span class="pc bpc" id="L452" title="1 of 6 branches missed.">                if (ch == 'f' || ch == 'F' || ch == '.') {</span>
<span class="fc bfc" id="L453" title="All 2 branches covered.">                	if (ch == '.') {</span>
<span class="fc" id="L454">                		buffer.append(ch);</span>
<span class="fc" id="L455">                		nextCh();</span>
                	}
                	
<span class="fc bfc" id="L458" title="All 2 branches covered.">                	while (isDigit(ch)) {</span>
<span class="fc" id="L459">                		buffer.append(ch);</span>
<span class="fc" id="L460">                		nextCh();</span>
                		
                	}
<span class="pc bpc" id="L463" title="1 of 4 branches missed.">                    if (ch == 'f' || ch == 'F') {</span>
<span class="fc" id="L464">                        buffer.append(ch);</span>
<span class="fc" id="L465">                        nextCh();</span>
<span class="fc" id="L466">         	            return new Token(TokenEnum.FLOAT, buffer.toString(), lineNumber);</span>
                    }
                    else
<span class="fc" id="L469">         	            return new Token(TokenEnum.DOUBLE, buffer.toString(), lineNumber);</span>
                }
                else
<span class="fc bfc" id="L472" title="All 2 branches covered.">            	while (isOctalDigit(ch)) {</span>
<span class="fc" id="L473">            		buffer.append(ch);</span>
<span class="fc" id="L474">            		nextCh();</span>
            	}
<span class="fc" id="L476"> 	            return new Token(TokenEnum.BASE8_INTEGER, buffer.toString(), lineNumber);</span>
            }
            
//          buffer = new StringBuffer();
  case '1':
        case '2':
        case '3':
        case '4':
        case '5':
        case '6':
        case '7':
        case '8':
        case '9':
<span class="fc" id="L489">        	buffer = new StringBuffer();</span>
<span class="fc" id="L490">        	return decimalLiteral(sign, buffer);</span>
        default:
<span class="fc" id="L492">           	buffer = new StringBuffer();</span>
<span class="fc bfc" id="L493" title="All 2 branches covered.">            if (ch == '@') {</span>
<span class="fc" id="L494">            	buffer.append(ch);</span>
<span class="fc" id="L495">            	nextCh();</span>
            }
<span class="pc bpc" id="L497" title="1 of 2 branches missed.">            if (isIdentifier(ch)) {</span>
<span class="fc bfc" id="L498" title="All 2 branches covered.">                while (isIdentifierPartial(ch)) {</span>
<span class="fc" id="L499">                    buffer.append(ch);</span>
<span class="fc" id="L500">                    nextCh();</span>
                }
<span class="fc" id="L502">                String identifier = buffer.toString();</span>
<span class="fc bfc" id="L503" title="All 2 branches covered.">                if (reserved.containsKey(identifier)) {</span>
<span class="fc" id="L504">                    return new Token(reserved.get(identifier), lineNumber);</span>
                } else {
<span class="fc" id="L506">                    return new Token(TokenEnum.IDENTIFIER, identifier, lineNumber);</span>
                }
            } else {
<span class="nc bnc" id="L509" title="All 2 branches missed.">            	if (ch != '\n')</span>
<span class="nc" id="L510">            		reportScannerError(&quot;Unidentified input token: '%c'&quot;, ch);</span>
<span class="nc" id="L511">                nextCh();</span>
<span class="nc" id="L512">                return getNextToken();</span>
            }
        }
   }

    /**
     *  Build a INT, FLOAT or a DOUBLE
     *
     *  @params void
     *
     *  @returns Token
     */
    public Token decimalLiteral(char sign, StringBuffer buffer) {
    	// Add in the sign
<span class="fc bfc" id="L526" title="All 4 branches covered.">    	if (sign == '-' || sign == '+')</span>
<span class="fc" id="L527">    		buffer.append(sign);</span>
    	
        // Get the integer part of a number
<span class="fc bfc" id="L530" title="All 2 branches covered.">        while (isDigit(ch)) {</span>
<span class="fc" id="L531">            buffer.append(ch);</span>
<span class="fc" id="L532">            nextCh(); </span>
        }
       
        // its a floating point number
<span class="pc bpc" id="L536" title="1 of 6 branches missed.">        if (ch == '.' || ch == 'e' || ch == 'E') {</span>
<span class="fc bfc" id="L537" title="All 2 branches covered.">            if (ch == '.') {</span>
<span class="fc" id="L538">                nextCh();</span>
<span class="pc bpc" id="L539" title="4 of 6 branches missed.">                if ((ch == 'e' || ch == 'E') &amp;&amp; buffer.length() == 0)</span>
<span class="nc" id="L540">    				return new Token(TokenEnum.PERIOD, buffer.toString(), lineNumber);</span>
<span class="pc bpc" id="L541" title="2 of 6 branches missed.">                if ((ch == 'f' || ch == 'F') &amp;&amp; buffer.length() == 0)</span>
<span class="nc" id="L542">    				return new Token(TokenEnum.PERIOD, buffer.toString(), lineNumber);</span>
<span class="fc" id="L543">                buffer.append('.');</span>
            }
            // Get the fractional part of the number
<span class="fc bfc" id="L546" title="All 2 branches covered.">            while (isDigit(ch)) {</span>
<span class="fc" id="L547">                buffer.append(ch);</span>
<span class="fc" id="L548">                nextCh(); </span>
            }
<span class="pc bpc" id="L550" title="4 of 12 branches missed.">            if (ch == 'e' || ch == 'E' || ch == 'f' || ch == 'F' || ch == 'd' || ch == 'D') {</span>
<span class="pc bpc" id="L551" title="1 of 4 branches missed.">            	if (ch == 'e' || ch == 'E' ) {</span>
<span class="fc" id="L552">            		buffer.append(ch);</span>
<span class="fc" id="L553">                    nextCh();</span>
            	}
            	
<span class="fc bfc" id="L556" title="All 4 branches covered.">                if (ch == '+' || ch == '-') {</span>
<span class="fc" id="L557">                    buffer.append(ch);</span>
<span class="fc" id="L558">                    nextCh();</span>
                }
                // Get the exponent part of the number
<span class="fc bfc" id="L561" title="All 2 branches covered.">                while (isDigit(ch)) {</span>
<span class="fc" id="L562">                	buffer.append(ch);</span>
<span class="fc" id="L563">                	nextCh();</span>
                }
                
                // make the number a float
<span class="fc bfc" id="L567" title="All 4 branches covered.">                if (ch == 'f' || ch == 'F') {</span>
<span class="fc" id="L568">                    buffer.append(ch);</span>
<span class="fc" id="L569">                    nextCh();</span>
<span class="fc" id="L570">         	        return new Token(TokenEnum.FLOAT, buffer.toString(), lineNumber);</span>
                } 
                else {
                	// make the number a double
<span class="fc bfc" id="L574" title="All 4 branches covered.">                	if (ch == 'd' || ch == 'D') {</span>
<span class="fc" id="L575">                		buffer.append(ch);</span>
<span class="fc" id="L576">                		nextCh();</span>
<span class="fc" id="L577">                		return new Token(TokenEnum.DOUBLE, buffer.toString(), lineNumber);</span>
                	}
                	else {
<span class="pc bpc" id="L580" title="1 of 2 branches missed.">                		if (buffer.length() &gt; 1) {</span>
<span class="fc" id="L581">                			return new Token(TokenEnum.DOUBLE, buffer.toString(), lineNumber);</span>
                		}
                		else {
<span class="nc bnc" id="L584" title="All 4 branches missed.">                			if (buffer.length() == 1 &amp;&amp; buffer.charAt(0) == '.') {</span>
<span class="nc" id="L585">                				return new Token(TokenEnum.PERIOD, buffer.toString(), lineNumber);</span>
                			}
                		}
                	}
                }
            }
            else {
<span class="pc bpc" id="L592" title="1 of 2 branches missed.">        		if (buffer.length() &gt; 1) {</span>
<span class="pc bpc" id="L593" title="2 of 4 branches missed.">        			if ((buffer.indexOf(&quot;d&quot;) &gt; 0) || (buffer.indexOf(&quot;D&quot;) &gt; 0)) </span>
<span class="nc" id="L594">        			   return new Token(TokenEnum.DOUBLE, buffer.toString(), lineNumber);</span>
        			else
<span class="pc bpc" id="L596" title="2 of 4 branches missed.">        			if ((buffer.indexOf(&quot;f&quot;) &gt; 0) || (buffer.indexOf(&quot;F&quot;) &gt; 0)) </span>
<span class="nc" id="L597">         			   return new Token(TokenEnum.FLOAT, buffer.toString(), lineNumber);</span>
        			else
<span class="fc" id="L599">     			       return new Token(TokenEnum.DOUBLE, buffer.toString(), lineNumber);</span>
        		}
        		else {
<span class="nc bnc" id="L602" title="All 4 branches missed.">        			if (buffer.length() == 1 &amp;&amp; buffer.charAt(0) == '.') {</span>
<span class="nc" id="L603">        				return new Token(TokenEnum.PERIOD, buffer.toString(), lineNumber);</span>
        			}
        		
<span class="nc" id="L606">        			return new Token(TokenEnum.EOF, buffer.toString(), lineNumber);</span>
        		}
            }           
        }      
        else {
<span class="fc bfc" id="L611" title="All 4 branches covered.">            if (ch == 'l' || ch == 'L') {</span>
<span class="fc" id="L612">            	buffer.append(ch);</span>
<span class="fc" id="L613">            	nextCh();</span>
<span class="fc" id="L614">        	    return new Token(TokenEnum.LONG_LITERAL, buffer.toString(), lineNumber); </span>
            }
            
<span class="fc" id="L617">    	    return new Token(TokenEnum.INT, buffer.toString(), lineNumber); </span>
        }
        
<span class="nc" id="L620">		return null;</span>
    }

    // Add to case '.' &amp; cases 1..9. Call is &quot;return decimalLiteral()&quot;
    /**
     * Scan and return an escaped character.
     * 
     * @return escaped character.
     */

    private String escape() {
<span class="pc bpc" id="L631" title="5 of 9 branches missed.">        switch (ch) {</span>
        case 'b':
<span class="nc" id="L633">            nextCh();</span>
<span class="nc" id="L634">            return &quot;\\b&quot;;</span>
        case 't':
<span class="fc" id="L636">            nextCh();</span>
<span class="fc" id="L637">            return &quot;\\t&quot;;</span>
        case 'n':
<span class="fc" id="L639">            nextCh();</span>
<span class="fc" id="L640">            return &quot;\\n&quot;;</span>
        case 'f':
<span class="nc" id="L642">            nextCh();</span>
<span class="nc" id="L643">            return &quot;\\f&quot;;</span>
        case 'r':
<span class="nc" id="L645">            nextCh();</span>
<span class="nc" id="L646">            return &quot;\\r&quot;;</span>
        case '&quot;':
<span class="nc" id="L648">            nextCh();</span>
<span class="nc" id="L649">            return &quot;\&quot;&quot;;</span>
        case '\'':
<span class="fc" id="L651">            nextCh();</span>
<span class="fc" id="L652">            return &quot;\\'&quot;;</span>
        case '\\':
<span class="fc" id="L654">            nextCh();</span>
<span class="fc" id="L655">            return &quot;\\\\&quot;;</span>
        default:
<span class="nc" id="L657">            reportScannerError(&quot;Badly formed escape: \\%c&quot;, ch);</span>
<span class="nc" id="L658">            nextCh();</span>
<span class="nc" id="L659">            return &quot;&quot;;</span>
        }
    }

    /**
     * Advance ch to the next character from input, and update the lineNumber number.
     */

    private void nextCh() {
<span class="fc" id="L668">        lineNumber = input.lineNumber();</span>
        try {
<span class="fc" id="L670">            ch = input.nextChar();</span>
<span class="nc" id="L671">        } catch (Exception e) {</span>
<span class="nc" id="L672">            reportScannerError(&quot;Unable to read characters from input&quot;);</span>
<span class="fc" id="L673">        }</span>
<span class="fc" id="L674">    }</span>

    /**
     * Report a lexcial error and record the fact that an error has occured.
     * This fact can be ascertained from the Scanner by sending it an
     * errorHasOccurred() message.
     * 
     * @param message
     *            message identifying the error.
     * @param args
     *            related values.
     */

    private void reportScannerError(String message, Object... args) {
<span class="nc" id="L688">        isInError = true;</span>
<span class="nc" id="L689">        System.err.printf(&quot;%s:%d: &quot;, fileName, lineNumber);</span>
<span class="nc" id="L690">        System.err.printf(message, args);</span>
<span class="nc" id="L691">        System.err.println();</span>
<span class="nc" id="L692">    }</span>

    /**
     * Return true if the specified character is a hex digit; false otherwise.
     * 
     * @param c
     *            character.
     * @return true or false.
     */

    private boolean isHexDigit(char c) {
<span class="fc" id="L703">    	boolean ok = false;</span>
<span class="fc bfc" id="L704" title="All 2 branches covered.">        switch(c) {</span>
        case '0':
        case '1':
        case '2':
        case '3':
        case '4':
        case '5':
        case '6':
        case '7':
        case '8':
        case '9':
        case 'a':
        case 'b':
        case 'c':
        case 'd':
        case 'e':
        case 'f':
        case 'A':
        case 'B':
        case 'C':
        case 'D':
        case 'E':
        case 'F':
        case 'l':
        case 'L':
        case '_':
<span class="fc" id="L730">        	ok = true;</span>
        	break;
        }
    
<span class="fc" id="L734">        return ok;</span>
    }

    /**
     * Return true if the specified character is a octal digit; false otherwise.
     * 
     * @param c
     *            character.
     * @return true or false.
     */

    private boolean isOctalDigit(char c) {
<span class="fc" id="L746">    	boolean ok = false;</span>
<span class="fc bfc" id="L747" title="All 2 branches covered.">        switch(c) {</span>
        case '0':
        case '1':
        case '2':
        case '3':
        case '4':
        case '5':
        case '6':
        case '7':
        case 'l':
        case 'L':
        case '_':
<span class="fc" id="L759">        	ok = true;</span>
        	break;
        }
    
<span class="fc" id="L763">        return ok;</span>
    }

    /**
     * Return true if the specified character is a binary digit; false otherwise.
     * 
     * @param c
     *            character.
     * @return true or false.
     */

    private boolean isBinaryDigit(char c) {
<span class="fc" id="L775">    	boolean ok = false;</span>
<span class="fc bfc" id="L776" title="All 2 branches covered.">        switch(c) {</span>
        case '0':
        case '1':
        case 'l':
        case 'L':
        case '_':
<span class="fc" id="L782">        	ok = true;</span>
        	break;
        }
    
<span class="fc" id="L786">        return ok;</span>
    }

    /**
     * Return true if the specified character is a digit (0-9); false otherwise.
     * 
     * @param c
     *            character.
     * @return true or false.
     */

    private boolean isDigit(char c) {
<span class="fc bfc" id="L798" title="All 6 branches covered.">        return ((c &gt;= '0' &amp;&amp; c &lt;= '9') || ch == '_');</span>
    }

   /**
     * Return true if the specified character is a whitespace; false otherwise.
     * 
     * @param c
     *            character.
     * @return true or false.
     */

    private boolean isWhitespace(char c) {
<span class="fc bfc" id="L810" title="All 2 branches covered.">        switch (c) {</span>
        case ' ':
        case '\t':
        case '\n': // CharReader maps all new lineNumbers to '\n'
        case '\f':
<span class="fc" id="L815">            return true;</span>
        }
<span class="fc" id="L817">        return false;</span>
    }

    /**
     * Return true if the specified character can start an identifier name;
     * false otherwise.
     * 
     * @param c
     *            character.
     * @return true or false.
     */

    private boolean isIdentifier(char c) {
<span class="pc bpc" id="L830" title="1 of 12 branches missed.">        return (c &gt;= 'a' &amp;&amp; c &lt;= 'z' || c &gt;= 'A' &amp;&amp; c &lt;= 'Z' || c == '_' || c == '$');</span>
    }

    /**
     * Return true if the specified character can be part of an identifier name;
     * false otherwise.
     * 
     * @param c
     *            character.
     * @return true or false.
     */

    private boolean isIdentifierPartial(char c) {
<span class="fc bfc" id="L843" title="All 4 branches covered.">        return (isIdentifier(c) || isDigit(c));</span>
    }

    /**
     * Has an error occurred up to now in lexical analysis?
     * 
     * @return true or false.
     */

    public boolean errorHasOccurred() {
<span class="nc" id="L853">        return isInError;</span>
    }

    /**
     * The name of the source file.
     *     	token = scanner.getNextToken();
    	System.out.println(token.enumeration);

     * @return name of the source file.
     */

    public String fileName() {
<span class="nc" id="L865">        return fileName;</span>
    }

    public static void main(String[] args) {
<span class="nc" id="L869">    	Token token = null;</span>
<span class="nc" id="L870">    	Scanner scanner = null;</span>
<span class="nc" id="L871">    	TokenList tokenList = new TokenList();</span>
    	
		try {
<span class="nc" id="L874">			scanner = new Scanner(&quot;src/jplusplus/scanner/TestInput.java&quot;);</span>
<span class="nc" id="L875">		} catch (FileNotFoundException e) {</span>
<span class="nc" id="L876">			e.printStackTrace();</span>
<span class="nc" id="L877">		}</span>
<span class="nc" id="L878">    	token = scanner.getNextToken();</span>
<span class="nc" id="L879">    	System.out.println(token.enumeration);</span>
<span class="nc bnc" id="L880" title="All 2 branches missed.">    	while  (token.enumeration != TokenEnum.EOF) {</span>
<span class="nc" id="L881">    		token = scanner.getNextToken();</span>
<span class="nc" id="L882">    		tokenList.add(token);</span>
    	}
<span class="nc" id="L884">    	tokenList.print(tokenList.getList());</span>
<span class="nc" id="L885">    }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.5.201910111838</span></div></body></html>