<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>Scanner.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">McCabe project</a> &gt; <a href="index.source.html" class="el_package">main.java.scanner</a> &gt; <span class="el_source">Scanner.java</span></div><h1>Scanner.java</h1><pre class="source lang-java linenums">//
// File:    Scanner.java
// Created: 4/28/2020
// Author:  Douglas Sweeney
//
// History: 
//           v1.0     4/28/2020        Douglas Sweeney modifications to a file found online.
//
package main.java.scanner;

import java.io.FileNotFoundException;
import java.util.Hashtable;

import main.java.main.TokenList;

/**
 * Convert a file to tokens.
 * 
 * @author dks
 * @since 1.0
 */
<span class="pc bpc" id="L22" title="1 of 2 branches missed.">public class Scanner {</span>

    /** End of file character. */
    public final static char EOFCH = CharReader.EOFCH;

    /** Keywords in j--. */
    private Hashtable&lt;String, TokenEnum&gt; reserved;

    /** Source characters. */
    private CharReader input;

    /** Next unscanned character. */
    private char ch;

    /** Whether a scanner error has been found. */
    private boolean isInError;

    /** Source file name. */
    private String fileName;

    /** lineNumber number of current token. */
    private int lineNumber;

    /**
     * Construct a Scanner object.
     * 
     * @param fileName
     *            the name of the file containing the source.
     * @exception FileNotFoundException
     *                when the named file cannot be found.
     */
<span class="fc" id="L53">    public Scanner(String fileName) throws FileNotFoundException {</span>
<span class="fc" id="L54">        this.input = new CharReader(fileName);</span>
<span class="fc" id="L55">        this.fileName = fileName;</span>
<span class="fc" id="L56">        isInError = false;</span>

        // Keywords
<span class="fc" id="L59">        reserved = new Hashtable&lt;String, TokenEnum&gt;();</span>
<span class="pc bpc" id="L60" title="3 of 4 branches missed.">        assert reserved != null : Scanner.class.getCanonicalName() +</span>
        		                  &quot;constructor: reserved == null&quot;;
<span class="fc" id="L62">        reserved.put(&quot;abstract&quot;, TokenEnum.ABSTRACT);</span>
<span class="fc" id="L63">        reserved.put(&quot;assert&quot;, TokenEnum.ASSERT);</span>
<span class="fc" id="L64">        reserved.put(&quot;boolean&quot;, TokenEnum.BOOLEAN);</span>
<span class="fc" id="L65">        reserved.put(&quot;break&quot;, TokenEnum.BREAK);</span>
<span class="fc" id="L66">        reserved.put(&quot;byte&quot;, TokenEnum.BYTE);</span>
<span class="fc" id="L67">        reserved.put(&quot;case&quot;, TokenEnum.CASE);</span>
<span class="fc" id="L68">        reserved.put(&quot;catch&quot;, TokenEnum.CATCH);</span>
<span class="fc" id="L69">        reserved.put(&quot;char&quot;, TokenEnum.CHAR);</span>
<span class="fc" id="L70">        reserved.put(&quot;class&quot;, TokenEnum.CLASS);</span>
<span class="fc" id="L71">        reserved.put(&quot;const&quot;, TokenEnum.CONST);</span>
<span class="fc" id="L72">        reserved.put(&quot;continue&quot;, TokenEnum.CONTINUE);</span>
<span class="fc" id="L73">        reserved.put(&quot;default&quot;, TokenEnum.DEFAULT);</span>
<span class="fc" id="L74">        reserved.put(&quot;do&quot;, TokenEnum.DO);</span>
<span class="fc" id="L75">        reserved.put(&quot;double&quot;, TokenEnum.DOUBLE);</span>
<span class="fc" id="L76">        reserved.put(&quot;else&quot;, TokenEnum.ELSE);</span>
<span class="fc" id="L77">        reserved.put(&quot;enum&quot;, TokenEnum.ENUM);</span>
<span class="fc" id="L78">        reserved.put(&quot;extends&quot;, TokenEnum.EXTENDS);</span>
<span class="fc" id="L79">        reserved.put(&quot;false&quot;, TokenEnum.FALSE);</span>
<span class="fc" id="L80">        reserved.put(&quot;final&quot;, TokenEnum.FINAL);</span>
<span class="fc" id="L81">        reserved.put(&quot;finally&quot;, TokenEnum.FINALLY);</span>
<span class="fc" id="L82">        reserved.put(&quot;float&quot;, TokenEnum.FLOAT);</span>
<span class="fc" id="L83">        reserved.put(&quot;for&quot;,  TokenEnum.FOR);</span>
<span class="fc" id="L84">        reserved.put(&quot;if&quot;, TokenEnum.IF);</span>
<span class="fc" id="L85">        reserved.put(&quot;goto&quot;, TokenEnum.GOTO);</span>
<span class="fc" id="L86">        reserved.put(&quot;implements&quot;, TokenEnum.IMPLEMENTS);</span>
<span class="fc" id="L87">        reserved.put(&quot;import&quot;, TokenEnum.IMPORT);</span>
<span class="fc" id="L88">        reserved.put(&quot;instanceof&quot;, TokenEnum.INSTANCEOF);</span>
<span class="fc" id="L89">        reserved.put(&quot;int&quot;, TokenEnum.INT);</span>
<span class="fc" id="L90">        reserved.put(&quot;interface&quot;, TokenEnum.INTERFACE);</span>
<span class="fc" id="L91">        reserved.put(&quot;long&quot;, TokenEnum.LONG);</span>
<span class="fc" id="L92">        reserved.put(&quot;native&quot;, TokenEnum.NATIVE);</span>
<span class="fc" id="L93">        reserved.put(&quot;new&quot;, TokenEnum.NEW);</span>
<span class="fc" id="L94">        reserved.put(&quot;null&quot;, TokenEnum.NULL);</span>
<span class="fc" id="L95">        reserved.put(&quot;package&quot;, TokenEnum.PACKAGE);</span>
<span class="fc" id="L96">        reserved.put(&quot;private&quot;, TokenEnum.PRIVATE);</span>
<span class="fc" id="L97">        reserved.put(&quot;protected&quot;, TokenEnum.PROTECTED);</span>
<span class="fc" id="L98">        reserved.put(&quot;public&quot;, TokenEnum.PUBLIC);</span>
<span class="fc" id="L99">        reserved.put(&quot;return&quot;, TokenEnum.RETURN);</span>
<span class="fc" id="L100">        reserved.put(&quot;short&quot;, TokenEnum.SHORT);</span>
<span class="fc" id="L101">        reserved.put(&quot;static&quot;, TokenEnum.STATIC);</span>
<span class="fc" id="L102">        reserved.put(&quot;strictfp&quot;, TokenEnum.STRICTFP);</span>
<span class="fc" id="L103">        reserved.put(&quot;super&quot;, TokenEnum.SUPER);</span>
<span class="fc" id="L104">        reserved.put(&quot;switch&quot;, TokenEnum.SWITCH);</span>
<span class="fc" id="L105">        reserved.put(&quot;synchronized&quot;, TokenEnum.SYNCHRONIZED);</span>
<span class="fc" id="L106">        reserved.put(&quot;this&quot;, TokenEnum.THIS);</span>
<span class="fc" id="L107">        reserved.put(&quot;throw&quot;, TokenEnum.THROW);</span>
<span class="fc" id="L108">        reserved.put(&quot;throws&quot;, TokenEnum.THROWS);</span>
<span class="fc" id="L109">        reserved.put(&quot;transient&quot;, TokenEnum.TRANSIENT);</span>
<span class="fc" id="L110">        reserved.put(&quot;true&quot;, TokenEnum.TRUE);</span>
<span class="fc" id="L111">        reserved.put(&quot;try&quot;, TokenEnum.TRY);</span>
<span class="fc" id="L112">        reserved.put(&quot;void&quot;, TokenEnum.VOID);</span>
<span class="fc" id="L113">        reserved.put(&quot;volatile&quot;, TokenEnum.VOLATILE);</span>
<span class="fc" id="L114">        reserved.put(&quot;while&quot;, TokenEnum.WHILE);</span>
        
<span class="fc" id="L116">        reserved.put(&quot;@Override&quot;, TokenEnum.OVERRIDE_ANNOTATION);</span>
<span class="fc" id="L117">        reserved.put(&quot;@Deprecated&quot;, TokenEnum.DEPRECATED_ANNOTATION);</span>
<span class="fc" id="L118">        reserved.put(&quot;@SuppressWarnings&quot;, TokenEnum.SUPPRESSWARNINGS_ANNOTATION);</span>

        // Prime the pump.
<span class="fc" id="L121">        nextCh();</span>
<span class="fc" id="L122">    }</span>

    /**
     * Scan the next valid token from input.
     * 
     * @return the the next scanned valid token.
     */
    public Token getNextToken() {
<span class="fc" id="L130">    	Token token = new Token(TokenEnum.NONE, &quot;&quot;, lineNumber);</span>

<span class="fc bfc" id="L132" title="All 2 branches covered.">    	while (token.enumeration == TokenEnum.NONE) {</span>
<span class="fc" id="L133">    		token = getNextValidToken();</span>
    	}
    	
<span class="fc" id="L136">    	return token;</span>
    }
    
    /**
     * Scan the next token from input.
     * 
     * @return the the next scanned token.
     */
    public Token getNextValidToken() {
<span class="fc" id="L145">    	boolean endOfCommentFound = false;</span>
<span class="fc" id="L146">    	char sign = ' ';     	</span>
        StringBuffer buffer;

<span class="fc bfc" id="L149" title="All 2 branches covered.">        while (isWhitespace(ch)) {</span>
<span class="fc" id="L150">        	nextCh();</span>
        }
        
<span class="fc" id="L153">        sign = ' ';</span>
<span class="fc" id="L154">        lineNumber = input.lineNumber();</span>
<span class="fc bfc" id="L155" title="All 30 branches covered.">        switch (ch) {</span>
        case '~':
<span class="fc" id="L157">            nextCh();</span>
<span class="fc" id="L158">            return new Token(TokenEnum.TILDE, lineNumber);</span>
        case '(':
<span class="fc" id="L160">            nextCh();</span>
<span class="fc" id="L161">            return new Token(TokenEnum.LPAREN, lineNumber);</span>
        case ')':
<span class="fc" id="L163">            nextCh();</span>
<span class="fc" id="L164">            return new Token(TokenEnum.RPAREN, lineNumber);</span>
        case '{':
<span class="fc" id="L166">            nextCh();</span>
<span class="fc" id="L167">            return new Token(TokenEnum.LBRACE, lineNumber);</span>
        case '}':
<span class="fc" id="L169">            nextCh();</span>
<span class="fc" id="L170">            return new Token(TokenEnum.RBRACE, lineNumber);</span>
        case '[':
<span class="fc" id="L172">            nextCh();</span>
<span class="fc" id="L173">            return new Token(TokenEnum.LBRACKET, lineNumber);</span>
        case ']':
<span class="fc" id="L175">            nextCh();</span>
<span class="fc" id="L176">            return new Token(TokenEnum.RBRACKET, lineNumber);</span>
        case ';':
<span class="fc" id="L178">            nextCh();</span>
<span class="fc" id="L179">            return new Token(TokenEnum.SEMICOLON, lineNumber);</span>
        case ',':
<span class="fc" id="L181">            nextCh();</span>
<span class="fc" id="L182">            return new Token(TokenEnum.COMMA, lineNumber);</span>
        case '.':
<span class="fc" id="L184">        	nextCh();</span>
<span class="fc" id="L185">   			return new Token(TokenEnum.PERIOD, lineNumber);</span>
        case '?':
<span class="fc" id="L187">            nextCh();</span>
<span class="fc" id="L188">            return new Token(TokenEnum.QUESTION_MARK, lineNumber);</span>
        case ':':
<span class="fc" id="L190">            nextCh();</span>
<span class="fc" id="L191">            return new Token(TokenEnum.COLON, lineNumber);</span>
        case '=':
<span class="fc" id="L193">            nextCh();</span>
<span class="fc bfc" id="L194" title="All 2 branches covered.">            if (ch == '=') {</span>
<span class="fc" id="L195">                nextCh();</span>
<span class="fc" id="L196">                return new Token(TokenEnum.EQUAL_EQUAL, lineNumber);</span>
            } else {
<span class="fc" id="L198">                return new Token(TokenEnum.EQUALS, lineNumber);</span>
            }
        case '!':
<span class="fc" id="L201">        	nextCh();</span>
<span class="fc bfc" id="L202" title="All 2 branches covered.">            if (ch == '=') {</span>
<span class="fc" id="L203">                nextCh();</span>
<span class="fc" id="L204">                return new Token(TokenEnum.NOT_EQUALS, lineNumber);</span>
            } else {
<span class="fc" id="L206">                return new Token(TokenEnum.NOT, lineNumber);</span>
            }
        case '|':
<span class="fc" id="L209">        	nextCh();</span>
<span class="fc bfc" id="L210" title="All 2 branches covered.">            if (ch == '=') {</span>
<span class="fc" id="L211">                nextCh();</span>
<span class="fc" id="L212">                return new Token(TokenEnum.OR_EQUALS, lineNumber);</span>
<span class="fc bfc" id="L213" title="All 2 branches covered.">            } else if (ch == '|') {</span>
<span class="fc" id="L214">            	nextCh();</span>
<span class="fc" id="L215">                return new Token(TokenEnum.OROR, lineNumber);</span>
            } else {
<span class="fc" id="L217">                return new Token(TokenEnum.OR, lineNumber);</span>
           	
            }
       case '^':
<span class="fc" id="L221">    	   nextCh();</span>
<span class="fc bfc" id="L222" title="All 2 branches covered.">            if (ch == '=') {</span>
<span class="fc" id="L223">                nextCh();</span>
<span class="fc" id="L224">                return new Token(TokenEnum.CARET_EQUALS, lineNumber);</span>
            } else {
<span class="fc" id="L226">            	nextCh();</span>
<span class="fc" id="L227">                return new Token(TokenEnum.CARET, lineNumber);</span>
            }
        case '%':
<span class="fc" id="L230">        	nextCh();</span>
<span class="fc bfc" id="L231" title="All 2 branches covered.">            if (ch == '=') {</span>
<span class="fc" id="L232">                nextCh();</span>
<span class="fc" id="L233">                return new Token(TokenEnum.MOD_EQUALS, lineNumber);</span>
            } else {
<span class="fc" id="L235">            	nextCh();</span>
<span class="fc" id="L236">                return new Token(TokenEnum.MOD, lineNumber);</span>
            }
        case '*':
<span class="fc" id="L239">        	nextCh();</span>
<span class="fc bfc" id="L240" title="All 2 branches covered.">            if (ch == '=') {</span>
<span class="fc" id="L241">                nextCh();</span>
<span class="fc" id="L242">                return new Token(TokenEnum.MULTIPLY_EQUALS, lineNumber);</span>
            } else {
<span class="fc" id="L244">                return new Token(TokenEnum.ASTERISK, lineNumber);</span>
            }
        case '/':
<span class="fc" id="L247">        	nextCh();</span>
<span class="fc bfc" id="L248" title="All 2 branches covered.">            if (ch == '=') {</span>
<span class="fc" id="L249">                nextCh();</span>
<span class="fc" id="L250">                return new Token(TokenEnum.DIVIDE_EQUALS, lineNumber);</span>
            } else {
<span class="fc bfc" id="L252" title="All 2 branches covered.">                if (ch == '/') {</span>
                   // CharReader maps all new lineNumbers to '\n'
<span class="pc bpc" id="L254" title="1 of 4 branches missed.">                   while (ch != '\n' &amp;&amp; ch != EOFCH) { //single line command</span>
<span class="fc" id="L255">                       nextCh();</span>
                   }
<span class="fc" id="L257">                   return new Token(TokenEnum.NONE, lineNumber);</span>
               }  
                else {
<span class="fc bfc" id="L260" title="All 2 branches covered.">                   if (ch == '*') { // multiline comment</span>
<span class="fc" id="L261">              	       nextCh();</span>
<span class="fc" id="L262">              	       endOfCommentFound = false;</span>
<span class="pc bpc" id="L263" title="1 of 4 branches missed.">                       while (ch != EOFCH &amp;&amp; !endOfCommentFound) { // scan though comment</span>
<span class="fc bfc" id="L264" title="All 2 branches covered.">                    	    if (ch == '*') {</span>
<span class="fc" id="L265">                    	    	nextCh();</span>
<span class="fc bfc" id="L266" title="All 2 branches covered.">                    	    	if (ch == '/') { // end of multilineNumber comment</span>
<span class="fc" id="L267">                    	    		endOfCommentFound = true;</span>
<span class="fc" id="L268">                    	    		nextCh();</span>
                    	    	} // if                    	    		
                            }
                    	    else {
<span class="fc" id="L272">                    	    	nextCh();</span>
                    	    }
                       } // while
<span class="fc" id="L275">                       return new Token(TokenEnum.NONE, lineNumber);</span>
                   } // if
                   else {
<span class="fc" id="L278">                       return new Token(TokenEnum.DIVIDE, lineNumber);</span>
                   }
                } 
            }
        case '+':
<span class="fc" id="L283">            nextCh();</span>
<span class="fc bfc" id="L284" title="All 2 branches covered.">            if (ch == '=') {</span>
<span class="fc" id="L285">                nextCh();</span>
<span class="fc" id="L286">                return new Token(TokenEnum.PLUS_EQUALS, lineNumber);</span>
            } else 
<span class="fc bfc" id="L288" title="All 2 branches covered.">            if (ch == '+') {</span>
<span class="fc" id="L289">                nextCh();</span>
<span class="fc" id="L290">                return new Token(TokenEnum.INCREMENT, lineNumber);</span>
            } else {
<span class="fc bfc" id="L292" title="All 2 branches covered.">            	switch (ch) {</span>
            		case '1':
            		case '2':
            		case '3':
            		case '4':
            		case '5':
            		case '6':
            		case '7':
            		case '8':
            		case '9':
<span class="fc" id="L302">            			buffer = new StringBuffer();</span>
<span class="fc" id="L303">            			sign = '+';</span>
<span class="fc" id="L304">            			return decimalLiteral(sign, buffer);</span>
            		default:
<span class="fc" id="L306">            			nextCh();</span>
<span class="fc" id="L307">            			return new Token(TokenEnum.PLUS, lineNumber);</span>
            	}
            }
        case '-':
<span class="fc" id="L311">            nextCh();</span>
<span class="fc bfc" id="L312" title="All 2 branches covered.">            if (ch == '-') {</span>
<span class="fc" id="L313">                nextCh();</span>
<span class="fc" id="L314">                return new Token(TokenEnum.DECREMENT, lineNumber);</span>
            } else {
<span class="fc bfc" id="L316" title="All 2 branches covered.">            	switch (ch) {</span>
        		case '1':
        		case '2':
        		case '3':
        		case '4':
        		case '5':
        		case '6':
        		case '7':
        		case '8':
        		case '9':
<span class="fc" id="L326">        			buffer = new StringBuffer();</span>
<span class="fc" id="L327">        			sign = '-';</span>
<span class="fc" id="L328">        			return decimalLiteral(sign, buffer);</span>
        		default:
<span class="fc" id="L330">        			nextCh();</span>
<span class="fc" id="L331">        			return new Token(TokenEnum.MINUS, lineNumber);</span>
            	}
            }
        case '&amp;':
<span class="fc" id="L335">            nextCh();</span>
<span class="fc bfc" id="L336" title="All 2 branches covered.">            if (ch == '&amp;') {</span>
<span class="fc" id="L337">                nextCh();</span>
<span class="fc" id="L338">                return new Token(TokenEnum.AMPERSAND_AMPERSAND, lineNumber);</span>
            } else {
<span class="fc" id="L340">                return new Token(TokenEnum.AMPERSAND, lineNumber);</span>
            }
        case '&gt;':
<span class="fc" id="L343">            nextCh();</span>
<span class="fc bfc" id="L344" title="All 2 branches covered.">            if (ch == '=') {</span>
<span class="fc" id="L345">                nextCh();</span>
<span class="fc" id="L346">                return new Token(TokenEnum.GT_EQUALS, lineNumber);</span>
            } else
<span class="fc bfc" id="L348" title="All 2 branches covered.">            if (ch == '&gt;') {</span>
<span class="fc" id="L349">                nextCh();</span>
<span class="fc bfc" id="L350" title="All 2 branches covered.">                if (ch == '&gt;') {</span>
<span class="fc" id="L351">                    nextCh();</span>
<span class="fc bfc" id="L352" title="All 2 branches covered.">                    if (ch == '=') {</span>
<span class="fc" id="L353">                        nextCh();</span>
<span class="fc" id="L354">                    	return new Token(TokenEnum.UNSIGNED_SHIFT_RIGHT_EQUALS, lineNumber);</span>
                    }
                    else {
<span class="fc" id="L357">                       	return new Token(TokenEnum.UNSIGNED_SHIFT_RIGHT, lineNumber);</span>
                    }
                } else 
<span class="fc bfc" id="L360" title="All 2 branches covered.">                    if (ch == '=') {</span>
<span class="fc" id="L361">                        nextCh();</span>
<span class="fc" id="L362">                    	return new Token(TokenEnum.SHIFT_RIGHT_EQUALS, lineNumber);</span>
                    }
                    else {
<span class="fc" id="L365">                       	return new Token(TokenEnum.SHIFT_RIGHT, lineNumber);</span>
                    }
            }  else 
<span class="fc" id="L368">            	return new Token(TokenEnum.GT, lineNumber);</span>
        case '&lt;':
<span class="fc" id="L370">            nextCh();</span>
<span class="fc bfc" id="L371" title="All 2 branches covered.">            if (ch == '=') {</span>
<span class="fc" id="L372">                nextCh();</span>
<span class="fc" id="L373">                return new Token(TokenEnum.LESS_EQUALS, lineNumber);</span>
            } else {
<span class="fc bfc" id="L375" title="All 2 branches covered.">            	if (ch == '&lt;') {</span>
<span class="fc" id="L376">            		nextCh();</span>
<span class="fc bfc" id="L377" title="All 2 branches covered.">                    if (ch == '=') {</span>
<span class="fc" id="L378">                    	nextCh();</span>
<span class="fc" id="L379">                    	return new Token(TokenEnum.SHIFT_LEFT_EQUALS, lineNumber);</span>
                    }
                    else {
<span class="fc" id="L382">                        return new Token(TokenEnum.SHIFT_LEFT, lineNumber);</span>
                    }
                }
                else {
<span class="fc" id="L386">                    return new Token(TokenEnum.LESS, lineNumber);</span>
                }
            }          
        case '\'':
<span class="fc" id="L390">            buffer = new StringBuffer();</span>
<span class="fc" id="L391">            buffer.append('\'');</span>
<span class="fc" id="L392">            nextCh();</span>
<span class="fc bfc" id="L393" title="All 2 branches covered.">            if (ch == '\\') {</span>
<span class="fc" id="L394">                nextCh();</span>
<span class="fc" id="L395">                buffer.append(escape());</span>
            } else {
<span class="fc" id="L397">                buffer.append(ch);</span>
<span class="fc" id="L398">                nextCh();</span>
            }
<span class="pc bpc" id="L400" title="1 of 2 branches missed.">            if (ch == '\'') {</span>
<span class="fc" id="L401">                buffer.append('\'');</span>
<span class="fc" id="L402">                nextCh();</span>
<span class="fc" id="L403">                return new Token(TokenEnum.CHAR, buffer.toString(), lineNumber);</span>
            } else {
                // Expected a ' ; report error and try to
                // recover.
<span class="nc" id="L407">                reportScannerError(ch</span>
                        + &quot; found by scanner where closing ' was expected.&quot;);
<span class="nc bnc" id="L409" title="All 6 branches missed.">                while (ch != '\'' &amp;&amp; ch != ';' &amp;&amp; ch != '\n') {</span>
<span class="nc" id="L410">                    nextCh();</span>
                }
<span class="nc" id="L412">                return new Token(TokenEnum.CHAR, buffer.toString(), lineNumber);</span>
            }
        case '&quot;':
<span class="fc" id="L415">            buffer = new StringBuffer();</span>
<span class="fc" id="L416">            buffer.append(&quot;\&quot;&quot;);</span>
<span class="fc" id="L417">            nextCh();</span>
<span class="pc bpc" id="L418" title="2 of 6 branches missed.">            while (ch != '&quot;' &amp;&amp; ch != '\n' &amp;&amp; ch != EOFCH) {</span>
<span class="fc bfc" id="L419" title="All 2 branches covered.">                if (ch == '\\') {</span>
<span class="fc" id="L420">                    nextCh();</span>
<span class="fc" id="L421">                    buffer.append(escape());</span>
                } else {
<span class="fc" id="L423">                    buffer.append(ch);</span>
<span class="fc" id="L424">                    nextCh();</span>
                }
            }
<span class="pc bpc" id="L427" title="1 of 2 branches missed.">            if (ch == '\n') {</span>
<span class="nc" id="L428">                reportScannerError(&quot;Unexpected end of lineNumber found in String&quot;);</span>
<span class="pc bpc" id="L429" title="1 of 2 branches missed.">            } else if (ch == EOFCH) {</span>
<span class="nc" id="L430">                reportScannerError(&quot;Unexpected end of file found in String&quot;);</span>
            } else {
                // Scan the closing &quot;
<span class="fc" id="L433">                nextCh();</span>
<span class="fc" id="L434">                buffer.append(&quot;\&quot;&quot;);</span>
            }
<span class="fc" id="L436">            return new Token(TokenEnum.STRING_LITERAL, buffer.toString(), lineNumber);</span>
        case EOFCH:
<span class="fc" id="L438">        	nextCh();</span>
<span class="fc" id="L439">            return new Token(TokenEnum.EOF, lineNumber);</span>
        case '0':
<span class="fc" id="L441">            nextCh();</span>
<span class="fc" id="L442">            buffer = new StringBuffer();</span>
<span class="fc" id="L443">            buffer.append('0');</span>
            
<span class="fc bfc" id="L445" title="All 4 branches covered.">            if (ch == 'x' || ch == 'X') {</span>
<span class="fc" id="L446">            	buffer.append(ch);</span>
<span class="fc" id="L447">            	nextCh();</span>
<span class="fc bfc" id="L448" title="All 2 branches covered.">            	while (isHexDigit(ch)) {</span>
<span class="fc" id="L449">            		buffer.append(ch);</span>
<span class="fc" id="L450">            		nextCh();           		</span>
            	}
<span class="fc" id="L452"> 	            return new Token(TokenEnum.BASE16_INTEGER, buffer.toString(), lineNumber);</span>
            }
            else
<span class="fc bfc" id="L455" title="All 4 branches covered.">            if (ch == 'b' || ch == 'B') {</span>
<span class="fc" id="L456">            	buffer.append(ch);</span>
<span class="fc" id="L457">            	nextCh();</span>
<span class="fc bfc" id="L458" title="All 2 branches covered.">            	while (isBinaryDigit(ch)) {</span>
<span class="fc" id="L459">            		buffer.append(ch);</span>
<span class="fc" id="L460">            		nextCh();</span>
            		
            	}
<span class="fc" id="L463"> 	            return new Token(TokenEnum.BASE2_INTEGER, buffer.toString(), lineNumber);</span>
           }
            else {
<span class="pc bpc" id="L466" title="1 of 6 branches missed.">                if (ch == 'f' || ch == 'F' || ch == '.') {</span>
<span class="fc bfc" id="L467" title="All 2 branches covered.">                	if (ch == '.') {</span>
<span class="fc" id="L468">                		buffer.append(ch);</span>
<span class="fc" id="L469">                		nextCh();</span>
                	}
                	
<span class="fc bfc" id="L472" title="All 2 branches covered.">                	while (isDigit(ch)) {</span>
<span class="fc" id="L473">                		buffer.append(ch);</span>
<span class="fc" id="L474">                		nextCh();</span>
                		
                	}
<span class="pc bpc" id="L477" title="1 of 4 branches missed.">                    if (ch == 'f' || ch == 'F') {</span>
<span class="fc" id="L478">                        buffer.append(ch);</span>
<span class="fc" id="L479">                        nextCh();</span>
<span class="fc" id="L480">         	            return new Token(TokenEnum.FLOAT, buffer.toString(), lineNumber);</span>
                    }
                    else
<span class="fc" id="L483">         	            return new Token(TokenEnum.DOUBLE, buffer.toString(), lineNumber);</span>
                }
                else
<span class="fc bfc" id="L486" title="All 2 branches covered.">            	while (isOctalDigit(ch)) {</span>
<span class="fc" id="L487">            		buffer.append(ch);</span>
<span class="fc" id="L488">            		nextCh();</span>
            	}
<span class="fc" id="L490"> 	            return new Token(TokenEnum.BASE8_INTEGER, buffer.toString(), lineNumber);</span>
            }
            
//          buffer = new StringBuffer();
  case '1':
        case '2':
        case '3':
        case '4':
        case '5':
        case '6':
        case '7':
        case '8':
        case '9':
<span class="fc" id="L503">        	buffer = new StringBuffer();</span>
<span class="fc" id="L504">        	return decimalLiteral(sign, buffer);</span>
        default:
<span class="fc" id="L506">           	buffer = new StringBuffer();</span>
<span class="fc bfc" id="L507" title="All 2 branches covered.">            if (ch == '@') {</span>
<span class="fc" id="L508">            	buffer.append(ch);</span>
<span class="fc" id="L509">            	nextCh();</span>
            }
<span class="pc bpc" id="L511" title="1 of 2 branches missed.">            if (isIdentifier(ch)) {</span>
<span class="fc bfc" id="L512" title="All 2 branches covered.">                while (isIdentifierPartial(ch)) {</span>
<span class="fc" id="L513">                    buffer.append(ch);</span>
<span class="fc" id="L514">                    nextCh();</span>
                }
<span class="fc" id="L516">                String identifier = buffer.toString();</span>
<span class="fc bfc" id="L517" title="All 2 branches covered.">                if (reserved.containsKey(identifier)) {</span>
<span class="fc" id="L518">                    return new Token(reserved.get(identifier), lineNumber);</span>
                } else {
<span class="fc" id="L520">                    return new Token(TokenEnum.IDENTIFIER, identifier, lineNumber);</span>
                }
            } else {
<span class="nc bnc" id="L523" title="All 2 branches missed.">            	if (ch != '\n')</span>
<span class="nc" id="L524">            		reportScannerError(&quot;Unidentified input token: '%c'&quot;, ch);</span>
<span class="nc" id="L525">                nextCh();</span>
<span class="nc" id="L526">                return getNextToken();</span>
            }
        }
   }

    /**
     *  Build a INT, FLOAT or a DOUBLE
     *
     *  @params void
     *
     *  @returns Token
     */
    public Token decimalLiteral(char sign, StringBuffer buffer) {
    	// Add in the sign
<span class="fc bfc" id="L540" title="All 4 branches covered.">    	if (sign == '-' || sign == '+')</span>
<span class="fc" id="L541">    		buffer.append(sign);</span>
    	
        // Get the integer part of a number
<span class="fc bfc" id="L544" title="All 2 branches covered.">        while (isDigit(ch)) {</span>
<span class="fc" id="L545">            buffer.append(ch);</span>
<span class="fc" id="L546">            nextCh(); </span>
        }
       
        // its a floating point number
<span class="pc bpc" id="L550" title="1 of 6 branches missed.">        if (ch == '.' || ch == 'e' || ch == 'E') {</span>
<span class="fc bfc" id="L551" title="All 2 branches covered.">            if (ch == '.') {</span>
<span class="fc" id="L552">                nextCh();</span>
<span class="pc bpc" id="L553" title="4 of 6 branches missed.">                if ((ch == 'e' || ch == 'E') &amp;&amp; buffer.length() == 0)</span>
<span class="nc" id="L554">    				return new Token(TokenEnum.PERIOD, buffer.toString(), lineNumber);</span>
<span class="pc bpc" id="L555" title="2 of 6 branches missed.">                if ((ch == 'f' || ch == 'F') &amp;&amp; buffer.length() == 0)</span>
<span class="nc" id="L556">    				return new Token(TokenEnum.PERIOD, buffer.toString(), lineNumber);</span>
<span class="fc" id="L557">                buffer.append('.');</span>
            }
            // Get the fractional part of the number
<span class="fc bfc" id="L560" title="All 2 branches covered.">            while (isDigit(ch)) {</span>
<span class="fc" id="L561">                buffer.append(ch);</span>
<span class="fc" id="L562">                nextCh(); </span>
            }
<span class="pc bpc" id="L564" title="4 of 12 branches missed.">            if (ch == 'e' || ch == 'E' || ch == 'f' || ch == 'F' || ch == 'd' || ch == 'D') {</span>
<span class="pc bpc" id="L565" title="1 of 4 branches missed.">            	if (ch == 'e' || ch == 'E' ) {</span>
<span class="fc" id="L566">            		buffer.append(ch);</span>
<span class="fc" id="L567">                    nextCh();</span>
            	}
            	
<span class="fc bfc" id="L570" title="All 4 branches covered.">                if (ch == '+' || ch == '-') {</span>
<span class="fc" id="L571">                    buffer.append(ch);</span>
<span class="fc" id="L572">                    nextCh();</span>
                }
                // Get the exponent part of the number
<span class="fc bfc" id="L575" title="All 2 branches covered.">                while (isDigit(ch)) {</span>
<span class="fc" id="L576">                	buffer.append(ch);</span>
<span class="fc" id="L577">                	nextCh();</span>
                }
                
                // make the number a float
<span class="fc bfc" id="L581" title="All 4 branches covered.">                if (ch == 'f' || ch == 'F') {</span>
<span class="fc" id="L582">                    buffer.append(ch);</span>
<span class="fc" id="L583">                    nextCh();</span>
<span class="fc" id="L584">         	        return new Token(TokenEnum.FLOAT, buffer.toString(), lineNumber);</span>
                } 
                else {
                	// make the number a double
<span class="fc bfc" id="L588" title="All 4 branches covered.">                	if (ch == 'd' || ch == 'D') {</span>
<span class="fc" id="L589">                		buffer.append(ch);</span>
<span class="fc" id="L590">                		nextCh();</span>
<span class="fc" id="L591">                		return new Token(TokenEnum.DOUBLE, buffer.toString(), lineNumber);</span>
                	}
                	else {
<span class="pc bpc" id="L594" title="1 of 2 branches missed.">                		if (buffer.length() &gt; 1) {</span>
<span class="fc" id="L595">                			return new Token(TokenEnum.DOUBLE, buffer.toString(), lineNumber);</span>
                		}
                		else {
<span class="nc bnc" id="L598" title="All 4 branches missed.">                			if (buffer.length() == 1 &amp;&amp; buffer.charAt(0) == '.') {</span>
<span class="nc" id="L599">                				return new Token(TokenEnum.PERIOD, buffer.toString(), lineNumber);</span>
                			}
                		}
                	}
                }
            }
            else {
<span class="pc bpc" id="L606" title="1 of 2 branches missed.">        		if (buffer.length() &gt; 1) {</span>
<span class="pc bpc" id="L607" title="2 of 4 branches missed.">        			if ((buffer.indexOf(&quot;d&quot;) &gt; 0) || (buffer.indexOf(&quot;D&quot;) &gt; 0)) </span>
<span class="nc" id="L608">        			   return new Token(TokenEnum.DOUBLE, buffer.toString(), lineNumber);</span>
        			else
<span class="pc bpc" id="L610" title="2 of 4 branches missed.">        			if ((buffer.indexOf(&quot;f&quot;) &gt; 0) || (buffer.indexOf(&quot;F&quot;) &gt; 0)) </span>
<span class="nc" id="L611">         			   return new Token(TokenEnum.FLOAT, buffer.toString(), lineNumber);</span>
        			else
<span class="fc" id="L613">     			       return new Token(TokenEnum.DOUBLE, buffer.toString(), lineNumber);</span>
        		}
        		else {
<span class="nc bnc" id="L616" title="All 4 branches missed.">        			if (buffer.length() == 1 &amp;&amp; buffer.charAt(0) == '.') {</span>
<span class="nc" id="L617">        				return new Token(TokenEnum.PERIOD, buffer.toString(), lineNumber);</span>
        			}
        		
<span class="nc" id="L620">        			return new Token(TokenEnum.EOF, buffer.toString(), lineNumber);</span>
        		}
            }           
        }      
        else {
<span class="fc bfc" id="L625" title="All 4 branches covered.">            if (ch == 'l' || ch == 'L') {</span>
<span class="fc" id="L626">            	buffer.append(ch);</span>
<span class="fc" id="L627">            	nextCh();</span>
<span class="fc" id="L628">        	    return new Token(TokenEnum.LONG_LITERAL, buffer.toString(), lineNumber); </span>
            }
            
<span class="fc" id="L631">    	    return new Token(TokenEnum.INT, buffer.toString(), lineNumber); </span>
        }
        
<span class="nc" id="L634">		return null;</span>
    }

    // Add to case '.' &amp; cases 1..9. Call is &quot;return decimalLiteral()&quot;
    /**
     * Scan and return an escaped character.
     * 
     * @return escaped character.
     */

    private String escape() {
<span class="pc bpc" id="L645" title="3 of 9 branches missed.">        switch (ch) {</span>
        case 'b':
<span class="nc" id="L647">            nextCh();</span>
<span class="nc" id="L648">            return &quot;\\b&quot;;</span>
        case 't':
<span class="fc" id="L650">            nextCh();</span>
<span class="fc" id="L651">            return &quot;\\t&quot;;</span>
        case 'n':
<span class="fc" id="L653">            nextCh();</span>
<span class="fc" id="L654">            return &quot;\\n&quot;;</span>
        case 'f':
<span class="fc" id="L656">            nextCh();</span>
<span class="fc" id="L657">            return &quot;\\f&quot;;</span>
        case 'r':
<span class="nc" id="L659">            nextCh();</span>
<span class="nc" id="L660">            return &quot;\\r&quot;;</span>
        case '&quot;':
<span class="fc" id="L662">            nextCh();</span>
<span class="fc" id="L663">            return &quot;\&quot;&quot;;</span>
        case '\'':
<span class="fc" id="L665">            nextCh();</span>
<span class="fc" id="L666">            return &quot;\\'&quot;;</span>
        case '\\':
<span class="fc" id="L668">            nextCh();</span>
<span class="fc" id="L669">            return &quot;\\\\&quot;;</span>
        default:
<span class="nc" id="L671">            reportScannerError(&quot;Badly formed escape: \\%c&quot;, ch);</span>
<span class="nc" id="L672">            nextCh();</span>
<span class="nc" id="L673">            return &quot;&quot;;</span>
        }
    }

    /**
     * Advance ch to the next character from input, and update the lineNumber number.
     */

    private void nextCh() {
<span class="fc" id="L682">        lineNumber = input.lineNumber();</span>
        try {
<span class="fc" id="L684">            ch = input.nextChar();</span>
<span class="nc" id="L685">        } catch (Exception e) {</span>
<span class="nc" id="L686">            reportScannerError(&quot;Unable to read characters from input&quot;);</span>
<span class="fc" id="L687">        }</span>
<span class="fc" id="L688">    }</span>

    /**
     * Report a lexcial error and record the fact that an error has occured.
     * This fact can be ascertained from the Scanner by sending it an
     * errorHasOccurred() message.
     * 
     * @param message
     *            message identifying the error.
     * @param args
     *            related values.
     */

    private void reportScannerError(String message, Object... args) {
<span class="nc" id="L702">        isInError = true;</span>
<span class="nc" id="L703">        System.err.printf(&quot;%s:%d: &quot;, fileName, lineNumber);</span>
<span class="nc" id="L704">        System.err.printf(message, args);</span>
<span class="nc" id="L705">        System.err.println();</span>
<span class="nc" id="L706">    }</span>

    /**
     * Return true if the specified character is a hex digit; false otherwise.
     * 
     * @param c
     *            character.
     * @return true or false.
     */

    private boolean isHexDigit(char c) {
<span class="fc" id="L717">    	boolean ok = false;</span>
<span class="fc bfc" id="L718" title="All 2 branches covered.">        switch(c) {</span>
        case '0':
        case '1':
        case '2':
        case '3':
        case '4':
        case '5':
        case '6':
        case '7':
        case '8':
        case '9':
        case 'a':
        case 'b':
        case 'c':
        case 'd':
        case 'e':
        case 'f':
        case 'A':
        case 'B':
        case 'C':
        case 'D':
        case 'E':
        case 'F':
        case 'l':
        case 'L':
        case '_':
<span class="fc" id="L744">        	ok = true;</span>
        	break;
        }
    
<span class="fc" id="L748">        return ok;</span>
    }

    /**
     * Return true if the specified character is a octal digit; false otherwise.
     * 
     * @param c
     *            character.
     * @return true or false.
     */

    private boolean isOctalDigit(char c) {
<span class="fc" id="L760">    	boolean ok = false;</span>
<span class="fc bfc" id="L761" title="All 2 branches covered.">        switch(c) {</span>
        case '0':
        case '1':
        case '2':
        case '3':
        case '4':
        case '5':
        case '6':
        case '7':
        case 'l':
        case 'L':
        case '_':
<span class="fc" id="L773">        	ok = true;</span>
        	break;
        }
    
<span class="fc" id="L777">        return ok;</span>
    }

    /**
     * Return true if the specified character is a binary digit; false otherwise.
     * 
     * @param c
     *            character.
     * @return true or false.
     */

    private boolean isBinaryDigit(char c) {
<span class="fc" id="L789">    	boolean ok = false;</span>
<span class="fc bfc" id="L790" title="All 2 branches covered.">        switch(c) {</span>
        case '0':
        case '1':
        case 'l':
        case 'L':
        case '_':
<span class="fc" id="L796">        	ok = true;</span>
        	break;
        }
    
<span class="fc" id="L800">        return ok;</span>
    }

    /**
     * Return true if the specified character is a digit (0-9); false otherwise.
     * 
     * @param c
     *            character.
     * @return true or false.
     */

    private boolean isDigit(char c) {
<span class="fc bfc" id="L812" title="All 6 branches covered.">        return ((c &gt;= '0' &amp;&amp; c &lt;= '9') || ch == '_');</span>
    }

   /**
     * Return true if the specified character is a whitespace; false otherwise.
     * 
     * @param c
     *            character.
     * @return true or false.
     */

    private boolean isWhitespace(char c) {
<span class="fc bfc" id="L824" title="All 2 branches covered.">        switch (c) {</span>
        case ' ':
        case '\t':
        case '\n': // CharReader maps all new lineNumbers to '\n'
        case '\f':
<span class="fc" id="L829">            return true;</span>
        }
<span class="fc" id="L831">        return false;</span>
    }

    /**
     * Return true if the specified character can start an identifier name;
     * false otherwise.
     * 
     * @param c
     *            character.
     * @return true or false.
     */

    private boolean isIdentifier(char c) {
<span class="pc bpc" id="L844" title="1 of 12 branches missed.">        return (c &gt;= 'a' &amp;&amp; c &lt;= 'z' || c &gt;= 'A' &amp;&amp; c &lt;= 'Z' || c == '_' || c == '$');</span>
    }

    /**
     * Return true if the specified character can be part of an identifier name;
     * false otherwise.
     * 
     * @param c
     *            character.
     * @return true or false.
     */

    private boolean isIdentifierPartial(char c) {
<span class="fc bfc" id="L857" title="All 4 branches covered.">        return (isIdentifier(c) || isDigit(c));</span>
    }

    /**
     * Has an error occurred up to now in lexical analysis?
     * 
     * @return true or false.
     */

    public boolean errorHasOccurred() {
<span class="nc" id="L867">        return isInError;</span>
    }

    /**
     * The name of the source file.
     *     	token = scanner.getNextToken();
    	System.out.println(token.enumeration);

     * @return name of the source file.
     */

    public String fileName() {
<span class="nc" id="L879">        return fileName;</span>
    }

    public static void main(String[] args) {
<span class="nc" id="L883">    	Token token = null;</span>
<span class="nc" id="L884">    	Scanner scanner = null;</span>
<span class="nc" id="L885">    	TokenList tokenList = new TokenList();</span>
    	
		try {
<span class="nc" id="L888">			scanner = new Scanner(&quot;src/jplusplus/scanner/TestInput.java&quot;);</span>
<span class="nc" id="L889">		} catch (FileNotFoundException e) {</span>
<span class="nc" id="L890">			e.printStackTrace();</span>
<span class="nc" id="L891">		}</span>
<span class="nc" id="L892">    	token = scanner.getNextToken();</span>
<span class="nc" id="L893">    	System.out.println(token.enumeration);</span>
<span class="nc bnc" id="L894" title="All 2 branches missed.">    	while  (token.enumeration != TokenEnum.EOF) {</span>
<span class="nc" id="L895">    		token = scanner.getNextToken();</span>
<span class="nc" id="L896">    		tokenList.add(token);</span>
    	}
<span class="nc" id="L898">    	tokenList.print(tokenList.getList());</span>
<span class="nc" id="L899">    }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.5.201910111838</span></div></body></html>